<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PlayRho: World.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PlayRho
   &#160;<span id="projectnumber">0.9.0</span>
   </div>
   <div id="projectbrief">An Interactive Real-Time-Oriented C++14-based Physics Engine &amp; Library</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('World_8cpp-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">World.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This is the <code>googletest</code> based unit testing file for the <code><a class="el" href="classplayrho_1_1d2_1_1World.html" title="Definition of an independent and simulatable &quot;world&quot;. ">playrho::d2::World</a></code> class.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * Copyright (c) 2017 Louis Langholtz https://github.com/louis-langholtz/PlayRho</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * This software is provided &#39;as-is&#39;, without any express or implied</span></div><div class="line"><span class="comment"> * warranty. In no event will the authors be held liable for any damages</span></div><div class="line"><span class="comment"> * arising from the use of this software.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Permission is granted to anyone to use this software for any purpose,</span></div><div class="line"><span class="comment"> * including commercial applications, and to alter it and redistribute it</span></div><div class="line"><span class="comment"> * freely, subject to the following restrictions:</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * 1. The origin of this software must not be misrepresented; you must not</span></div><div class="line"><span class="comment"> *    claim that you wrote the original software. If you use this software</span></div><div class="line"><span class="comment"> *    in a product, an acknowledgment in the product documentation would be</span></div><div class="line"><span class="comment"> *    appreciated but is not required.</span></div><div class="line"><span class="comment"> * 2. Altered source versions must be plainly marked as such, and must not be</span></div><div class="line"><span class="comment"> *    misrepresented as being the original software.</span></div><div class="line"><span class="comment"> * 3. This notice may not be removed or altered from any source distribution.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;UnitTests.hpp&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/World.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/StepConf.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Body.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/BodyConf.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Fixture.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Contacts/Contact.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/ContactImpulsesList.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/Shapes/DiskShapeConf.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/Shapes/PolygonShapeConf.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/Shapes/EdgeShapeConf.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/Collision.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/RayCastInput.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Collision/RayCastOutput.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/TargetJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/RopeJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/RevoluteJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/PrismaticJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/DistanceJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/PulleyJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/WeldJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/FrictionJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/MotorJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/WheelJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Dynamics/Joints/GearJoint.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Common/LengthError.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;PlayRho/Common/WrongState.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;type_traits&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceplayrho.html">playrho</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceplayrho_1_1d2.html">playrho::d2</a>;</div><div class="line"></div><div class="line"><span class="keyword">class </span>UnitTestDestructionListener: <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classplayrho_1_1d2_1_1DestructionListener.html">playrho::d2::DestructionListener</a></div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> SayGoodbye(<span class="keyword">const</span> <a name="_a1"></a><a class="code" href="classplayrho_1_1d2_1_1Joint.html">Joint</a>&amp; joint) noexcept <span class="keyword">override</span></div><div class="line">    {</div><div class="line">        joints.push_back(&amp;joint);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> SayGoodbye(<span class="keyword">const</span> <a name="_a2"></a><a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>&amp; fixture) noexcept <span class="keyword">override</span></div><div class="line">    {</div><div class="line">        fixtures.push_back(&amp;fixture);</div><div class="line">    }</div><div class="line">    </div><div class="line"><span class="keyword">public</span>:</div><div class="line">    std::vector&lt;const Joint*&gt; joints;</div><div class="line">    std::vector&lt;const Fixture*&gt; fixtures;</div><div class="line">};</div><div class="line"></div><div class="line">TEST(<a name="_a3"></a><a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, ByteSize)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (<span class="keyword">sizeof</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span>  4:</div><div class="line">        {</div><div class="line">            <span class="comment">// Size is OS dependent.</span></div><div class="line">            <span class="comment">// Seems linux containers are bigger in size...</span></div><div class="line"><span class="preprocessor">#ifdef __APPLE__</span></div><div class="line">            EXPECT_EQ(<span class="keyword">sizeof</span>(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>), std::size_t(232));</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#ifdef __linux__</span></div><div class="line">            EXPECT_EQ(<span class="keyword">sizeof</span>(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>), std::size_t(232));</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span>  8:</div><div class="line">        {</div><div class="line"><span class="preprocessor">#ifdef __APPLE__</span></div><div class="line">            EXPECT_EQ(<span class="keyword">sizeof</span>(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>), std::size_t(248));</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#ifdef __linux__</span></div><div class="line">            EXPECT_EQ(<span class="keyword">sizeof</span>(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>), std::size_t(248));</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> 16:</div><div class="line">            EXPECT_EQ(<span class="keyword">sizeof</span>(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>), std::size_t(272));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>: FAIL(); <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, Conf)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> worldConf = <a name="_a4"></a><a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> defaultConf = <a name="a5"></a><a class="code" href="namespaceplayrho_1_1d2.html#ad1b49affcbf8a783155380873e8398a7">GetDefaultWorldConf</a>();</div><div class="line">    </div><div class="line">    EXPECT_EQ(defaultConf.maxVertexRadius, worldConf.maxVertexRadius);</div><div class="line">    EXPECT_EQ(defaultConf.minVertexRadius, worldConf.minVertexRadius);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> stepConf = <a name="_a6"></a><a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v = <a name="a7"></a><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> n = <a name="a8"></a><a class="code" href="group__FixedMath.html#ga935fa93a69f58baf20b00e14461d51e7">nextafter</a>(v, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = (v - n) * 1_s;</div><div class="line">    ASSERT_GT(time_inc, 0_s);</div><div class="line">    ASSERT_LT(time_inc, 1_s);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> max_inc = time_inc * stepConf.maxTranslation;</div><div class="line">    EXPECT_GT(max_inc, 0_m * 1_s);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, Traits)</div><div class="line">{</div><div class="line">    EXPECT_TRUE(std::is_default_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_nothrow_default_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_trivially_default_constructible&lt;World&gt;::value);</div><div class="line">    </div><div class="line">    EXPECT_TRUE(std::is_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_nothrow_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_trivially_constructible&lt;World&gt;::value);</div><div class="line">    </div><div class="line">    EXPECT_TRUE(std::is_copy_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_nothrow_copy_constructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_trivially_copy_constructible&lt;World&gt;::value);</div><div class="line">    </div><div class="line">    EXPECT_TRUE(std::is_copy_assignable&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_nothrow_copy_assignable&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_trivially_copy_assignable&lt;World&gt;::value);</div><div class="line">    </div><div class="line">    EXPECT_TRUE(std::is_destructible&lt;World&gt;::value);</div><div class="line">    EXPECT_TRUE(std::is_nothrow_destructible&lt;World&gt;::value);</div><div class="line">    EXPECT_FALSE(std::is_trivially_destructible&lt;World&gt;::value);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, WorldLockedError)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> value = <a name="_a9"></a><a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>{<span class="stringliteral">&quot;world is locked&quot;</span>};</div><div class="line">    EXPECT_STREQ(value.what(), <span class="stringliteral">&quot;world is locked&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, DefaultInit)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line"></div><div class="line">    EXPECT_EQ(<a name="a10"></a><a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a name="a11"></a><a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    EXPECT_EQ(world.<a name="a12"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a name="a13"></a><a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#a835291d0eb5b8bf966c76e2ab4f4e3fe">GetLeafCount</a>(), <a name="a14"></a><a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    EXPECT_EQ(<a name="a15"></a><a class="code" href="namespaceplayrho_1_1d2.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a name="a16"></a><a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    EXPECT_EQ(<a name="a17"></a><a class="code" href="namespaceplayrho_1_1d2.html#ac7b6c00fbd4fc40a4957bd082c9437b4">GetContactCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    EXPECT_EQ(<a name="a18"></a><a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    EXPECT_EQ(<a name="a19"></a><a class="code" href="namespaceplayrho_1_1d2.html#a7daf9650f36f8d172678d1398034a516">ComputePerimeterRatio</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0));</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies = world.<a name="a20"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">        EXPECT_TRUE(bodies.empty());</div><div class="line">        EXPECT_EQ(bodies.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">        EXPECT_EQ(bodies.begin(), bodies.end());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().end());</div><div class="line">    }</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; w = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>&amp;<span class="keyword">&gt;</span>(world);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies = w.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">        EXPECT_TRUE(bodies.empty());</div><div class="line">        EXPECT_EQ(bodies.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">        EXPECT_EQ(bodies.begin(), bodies.end());</div><div class="line">        EXPECT_EQ(w.GetBodies().begin(), w.GetBodies().end());</div><div class="line">    }</div><div class="line"></div><div class="line">    EXPECT_TRUE(world.<a name="a21"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().empty());</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().end());</div><div class="line">    </div><div class="line">    EXPECT_TRUE(world.<a name="a22"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().empty());</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().end());</div><div class="line">    </div><div class="line">    EXPECT_FALSE(world.<a name="a23"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a8799d82838efa9277f588dc0819c51dd">GetSubStepping</a>());</div><div class="line">    EXPECT_FALSE(world.<a name="a24"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#aabf20551c381368b2019b832b7c98119">IsLocked</a>());</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, Init)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#aabf20551c381368b2019b832b7c98119">IsLocked</a>());</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> calls = 0;</div><div class="line">        <a name="a25"></a><a class="code" href="namespaceplayrho_1_1d2.html#a52ca8acb99e3c3591d13ca912282470e">Query</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a name="_a26"></a><a class="code" href="structplayrho_1_1detail_1_1AABB.html">AABB</a>{}, [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>*, <a name="a27"></a><a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a>) {</div><div class="line">            ++calls;</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">        });</div><div class="line">        EXPECT_EQ(calls, 0);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p1 = <a name="_a28"></a><a class="code" href="structplayrho_1_1Vector.html">Length2</a>{0_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{100_m, 0_m};</div><div class="line">        <span class="keyword">auto</span> calls = 0;</div><div class="line">        <a name="a29"></a><a class="code" href="group__RayCastGroup.html#gad7a1b955a57a2bb043750bf32cde2549">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a name="_a30"></a><a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p1, p2, <a name="_a31"></a><a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}}, [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>*, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a>, <a name="a32"></a><a class="code" href="namespaceplayrho.html#a7dc68cd0ce177e175ae0bb6c39db158d">Length2</a>, <a name="_a33"></a><a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            ++calls;</div><div class="line">            <span class="keywordflow">return</span> <a name="a34"></a><a class="code" href="namespaceplayrho.html#a66189f1fe36ac717e284ab1099171106a4592f28dc9d11de3ce507bebafd9de16">RayCastOpcode::ResetRay</a>;</div><div class="line">        });</div><div class="line">        EXPECT_EQ(calls, 0);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, InvalidArgumentInit)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> min = <a class="code" href="classplayrho_1_1BoundedValue.html">Positive&lt;Length&gt;</a>(4_m);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> max = <a class="code" href="classplayrho_1_1BoundedValue.html">Positive&lt;Length&gt;</a>(8_m);</div><div class="line">    ASSERT_GT(max, min);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> def = <a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a name="a35"></a><a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(max).<a name="a36"></a><a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a7dc6ccf68dc16bec3b09497afbd05dc0">UseMaxVertexRadius</a>(min);</div><div class="line">    EXPECT_THROW(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{def}, <a name="_a37"></a><a class="code" href="classplayrho_1_1InvalidArgument.html">InvalidArgument</a>);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, Clear)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), std::size_t(0));</div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), std::size_t(0));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> listener = UnitTestDestructionListener{};</div><div class="line">    world.<a name="a38"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a3f0652770c49d942111e84c231c6175d">SetDestructionListener</a>(&amp;listener);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b0 = world.<a name="a39"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> f0 = b0-&gt;<a name="a40"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a name="_a41"></a><a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a name="_a42"></a><a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}});</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> f1 = b1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}});</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> j0 = world.<a name="a43"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a44"></a><a class="code" href="structplayrho_1_1d2_1_1DistanceJointConf.html">DistanceJointConf</a>{b0, b1});</div><div class="line">    ASSERT_NE(j0, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), std::size_t(2));</div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), std::size_t(1));</div><div class="line">    </div><div class="line">    world.<a name="a45"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a5f7ba5f781b2d795f06aaa5d0e7b5ca9">Clear</a>();</div><div class="line"></div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), std::size_t(0));</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), std::size_t(0));</div><div class="line">    </div><div class="line">    ASSERT_EQ(listener.fixtures.size(), std::size_t(2));</div><div class="line">    EXPECT_EQ(listener.fixtures.at(0), f0);</div><div class="line">    EXPECT_EQ(listener.fixtures.at(1), f1);</div><div class="line">    </div><div class="line">    ASSERT_EQ(listener.joints.size(), std::size_t(1));</div><div class="line">    EXPECT_EQ(listener.joints.at(0), j0);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SetSubStepping)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    </div><div class="line">    ASSERT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8799d82838efa9277f588dc0819c51dd">GetSubStepping</a>());</div><div class="line">    world.<a name="a46"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a6eb2e6c5d518c12dcbcc26979f46a5ae">SetSubStepping</a>(<span class="keyword">true</span>);</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8799d82838efa9277f588dc0819c51dd">GetSubStepping</a>());</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    stepConf.<a name="a47"></a><a class="code" href="classplayrho_1_1StepConf.html#a3ece970cfb6bc348b826b278eb76382c">SetInvTime</a>(100_Hz);</div><div class="line">    world.<a name="a48"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8799d82838efa9277f588dc0819c51dd">GetSubStepping</a>());</div><div class="line"></div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a6eb2e6c5d518c12dcbcc26979f46a5ae">SetSubStepping</a>(<span class="keyword">false</span>);</div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8799d82838efa9277f588dc0819c51dd">GetSubStepping</a>());</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CopyConstruction)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> copy = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{world};</div><div class="line">        EXPECT_EQ(world.<a name="a49"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a95453e9c6c17e66fbb7e96256b2ca071">GetMinVertexRadius</a>(), copy.GetMinVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a name="a50"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a887bfd8eb8cbe735a9830c8a5aec2bce">GetMaxVertexRadius</a>(), copy.GetMaxVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), copy.GetBodies().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), copy.GetContacts().size());</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(copy.GetTree()));</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#a835291d0eb5b8bf966c76e2ab4f4e3fe">GetLeafCount</a>(), copy.GetTree().GetLeafCount());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a name="a51"></a><a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#ac45645f46517f8e3c37ca8abf0e2bbd3">GetMaxBalance</a>(), copy.GetTree().GetMaxBalance());</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a name="a52"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a name="a53"></a><a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(1_m)};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a name="_a54"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a name="a55"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a name="a56"></a><a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">    </div><div class="line">    <span class="comment">// Add another body on top of previous and that&#39;s not part of any joints to ensure at 1 contact</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b3 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b3-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b4 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b4-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b5 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b5-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> rj1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a57"></a><a class="code" href="structplayrho_1_1d2_1_1RevoluteJointConf.html">RevoluteJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}});</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> rj2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1RevoluteJointConf.html">RevoluteJointConf</a>{b3, b4, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a58"></a><a class="code" href="structplayrho_1_1d2_1_1PrismaticJointConf.html">PrismaticJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a name="a59"></a><a class="code" href="classplayrho_1_1d2_1_1UnitVec.html#aacc21d096d69c8b5dde10d7a8f9f66b0">UnitVec::GetRight</a>()});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a60"></a><a class="code" href="structplayrho_1_1d2_1_1PulleyJointConf.html">PulleyJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{},</div><div class="line">        <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}}.UseRatio(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)));</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1DistanceJointConf.html">DistanceJointConf</a>{b4, b5});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a61"></a><a class="code" href="structplayrho_1_1d2_1_1WeldJointConf.html">WeldJointConf</a>{b4, b5, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a62"></a><a class="code" href="structplayrho_1_1d2_1_1FrictionJointConf.html">FrictionJointConf</a>{b4, b5, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a63"></a><a class="code" href="structplayrho_1_1d2_1_1RopeJointConf.html">RopeJointConf</a>{b4, b5});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a64"></a><a class="code" href="structplayrho_1_1d2_1_1MotorJointConf.html">MotorJointConf</a>{b4, b5});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a65"></a><a class="code" href="structplayrho_1_1d2_1_1WheelJointConf.html">WheelJointConf</a>{b4, b5, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html#aacc21d096d69c8b5dde10d7a8f9f66b0">UnitVec::GetRight</a>()});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a66"></a><a class="code" href="structplayrho_1_1d2_1_1TargetJointConf.html">TargetJointConf</a>{b4});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a67"></a><a class="code" href="structplayrho_1_1d2_1_1GearJointConf.html">GearJointConf</a>{rj1, rj2});</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    ASSERT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().empty());</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> copy = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{world};</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a95453e9c6c17e66fbb7e96256b2ca071">GetMinVertexRadius</a>(), copy.GetMinVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a887bfd8eb8cbe735a9830c8a5aec2bce">GetMaxVertexRadius</a>(), copy.GetMaxVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> minJoints = std::min(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> worldJointIter = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin();</div><div class="line">        <span class="keyword">auto</span> copyJointIter = copy.GetJoints().begin();</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(minJoints){0}; i &lt; minJoints; ++i)</div><div class="line">        {</div><div class="line">            EXPECT_EQ(<a name="a68"></a><a class="code" href="namespaceplayrho_1_1d2.html#ab274cbc54f178cbd8236401727296dcf">GetType</a>(*(*worldJointIter)), <a class="code" href="namespaceplayrho_1_1d2.html#ab274cbc54f178cbd8236401727296dcf">GetType</a>(*(*copyJointIter)));</div><div class="line">            ++worldJointIter;</div><div class="line">            ++copyJointIter;</div><div class="line">        }</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), copy.GetBodies().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), copy.GetContacts().size());</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(copy.GetTree()));</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#a835291d0eb5b8bf966c76e2ab4f4e3fe">GetLeafCount</a>(), copy.GetTree().GetLeafCount());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#ac45645f46517f8e3c37ca8abf0e2bbd3">GetMaxBalance</a>(), copy.GetTree().GetMaxBalance());</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CopyAssignment)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> copy = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">        copy = world;</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a95453e9c6c17e66fbb7e96256b2ca071">GetMinVertexRadius</a>(), copy.GetMinVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a887bfd8eb8cbe735a9830c8a5aec2bce">GetMaxVertexRadius</a>(), copy.GetMaxVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), copy.GetBodies().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), copy.GetContacts().size());</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(copy.GetTree()));</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#a835291d0eb5b8bf966c76e2ab4f4e3fe">GetLeafCount</a>(), copy.GetTree().GetLeafCount());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#ac45645f46517f8e3c37ca8abf0e2bbd3">GetMaxBalance</a>(), copy.GetTree().GetMaxBalance());</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(1_m)};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    b2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">    </div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1RevoluteJointConf.html">RevoluteJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1PrismaticJointConf.html">PrismaticJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html#aacc21d096d69c8b5dde10d7a8f9f66b0">UnitVec::GetRight</a>()});</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1PulleyJointConf.html">PulleyJointConf</a>{b1, b2, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{},</div><div class="line">        <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{}}.UseRatio(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> copy = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">        copy = world;</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a95453e9c6c17e66fbb7e96256b2ca071">GetMinVertexRadius</a>(), copy.GetMinVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a887bfd8eb8cbe735a9830c8a5aec2bce">GetMaxVertexRadius</a>(), copy.GetMaxVertexRadius());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> minJoints = std::min(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().size(), copy.GetJoints().size());</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> worldJointIter = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin();</div><div class="line">        <span class="keyword">auto</span> copyJointIter = copy.GetJoints().begin();</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(minJoints){0}; i &lt; minJoints; ++i)</div><div class="line">        {</div><div class="line">            EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#ab274cbc54f178cbd8236401727296dcf">GetType</a>(*(*worldJointIter)), <a class="code" href="namespaceplayrho_1_1d2.html#ab274cbc54f178cbd8236401727296dcf">GetType</a>(*(*copyJointIter)));</div><div class="line">            ++worldJointIter;</div><div class="line">            ++copyJointIter;</div><div class="line">        }</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), copy.GetBodies().size());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), copy.GetContacts().size());</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>()), <a class="code" href="namespaceplayrho_1_1d2.html#a72265a3c2d4511e74df6ab4d13112f6d">GetHeight</a>(copy.GetTree()));</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#a835291d0eb5b8bf966c76e2ab4f4e3fe">GetLeafCount</a>(), copy.GetTree().GetLeafCount());</div><div class="line">        EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>().<a class="code" href="classplayrho_1_1d2_1_1DynamicTree.html#ac45645f46517f8e3c37ca8abf0e2bbd3">GetMaxBalance</a>(), copy.GetTree().GetMaxBalance());</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CreateDestroyEmptyStaticBody)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a name="a69"></a><a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a84a8921b25f505d0d2077aeb5db4bc16">BodyType::Static</a>));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    EXPECT_EQ(body-&gt;GetType(), <a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a84a8921b25f505d0d2077aeb5db4bc16">BodyType::Static</a>);</div><div class="line">    EXPECT_FALSE(body-&gt;IsSpeedable());</div><div class="line">    EXPECT_FALSE(body-&gt;IsAccelerable());</div><div class="line">    EXPECT_TRUE(body-&gt;IsImpenetrable());</div><div class="line">    </div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">    EXPECT_FALSE(bodies1.empty());</div><div class="line">    EXPECT_EQ(bodies1.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    EXPECT_NE(bodies1.begin(), bodies1.end());</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; first = <a name="a70"></a><a class="code" href="namespaceplayrho.html#a3c3194ff280eae2efe80483c3388891c">GetRef</a>(*bodies1.begin());</div><div class="line">    EXPECT_EQ(body, &amp;first);</div><div class="line">    </div><div class="line">    world.<a name="a71"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(body);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">    EXPECT_TRUE(bodies2.empty());</div><div class="line">    EXPECT_EQ(bodies2.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CreateDestroyJoinedBodies)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> listener = UnitTestDestructionListener{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a3f0652770c49d942111e84c231c6175d">SetDestructionListener</a>(&amp;listener);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">    EXPECT_FALSE(bodies1.empty());</div><div class="line">    EXPECT_EQ(bodies1.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    EXPECT_NE(bodies1.begin(), bodies1.end());</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; first = <a class="code" href="namespaceplayrho.html#a3c3194ff280eae2efe80483c3388891c">GetRef</a>(*bodies1.begin());</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body, &amp;first);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(2));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> f0 = body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{1_m}});</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> f1 = body2-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{1_m}});</div><div class="line"></div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> c0 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().begin();</div><div class="line">    EXPECT_FALSE(c0-&gt;second-&gt;NeedsFiltering());</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> joint = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1DistanceJointConf.html">DistanceJointConf</a>{body, body2});</div><div class="line">    ASSERT_NE(joint, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(1));</div><div class="line">    EXPECT_TRUE(c0-&gt;second-&gt;NeedsFiltering());</div><div class="line"></div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(body);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bodies0 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>();</div><div class="line">    EXPECT_FALSE(bodies0.empty());</div><div class="line">    EXPECT_EQ(bodies0.size(), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    EXPECT_NE(bodies0.begin(), bodies0.end());</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(body2);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    </div><div class="line">    ASSERT_EQ(listener.fixtures.size(), std::size_t(2));</div><div class="line">    EXPECT_EQ(listener.fixtures.at(0), f0);</div><div class="line">    EXPECT_EQ(listener.fixtures.at(1), f1);</div><div class="line"></div><div class="line">    ASSERT_EQ(listener.joints.size(), std::size_t(1));</div><div class="line">    EXPECT_EQ(listener.joints.at(0), joint);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CreateDestroyContactingBodies)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    <span class="keyword">auto</span> contacts = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>();</div><div class="line">    ASSERT_TRUE(contacts.empty());</div><div class="line">    ASSERT_EQ(contacts.size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> l1 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> l2 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>).<a name="a72"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(l1));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(<a class="code" href="namespaceplayrho.html#a098b0ef528e3b728af8e3e17873963f7a971fd8cc345d8bd9f92e9f7d88fdf20c">BodyType::Dynamic</a>).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(l2));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(2));</div><div class="line">    </div><div class="line">    EXPECT_NE(body1-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf{1_m}.UseDensity(1_kgpm2)}), <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_NE(body2-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf{1_m}.UseDensity(1_kgpm2)}), <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(2));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    contacts = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>();</div><div class="line">    EXPECT_FALSE(contacts.empty());</div><div class="line">    EXPECT_EQ(contacts.size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(1));</div><div class="line"></div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(body1);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(1));</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(body2);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    contacts = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>();</div><div class="line">    EXPECT_TRUE(contacts.empty());</div><div class="line">    EXPECT_EQ(contacts.size(), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(0));</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CreateAndDestroyFixture)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    <span class="keyword">auto</span> other = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> bodyA = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> bodyB = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    ASSERT_EQ(<a name="a73"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(*bodyA), std::size_t(0));</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(*bodyB), std::size_t(0));</div><div class="line">    </div><div class="line">    EXPECT_THROW(world.<a name="a74"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#ac650be379a8f0b6b51a008caca23d744">CreateFixture</a>(*bodyA, <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf(0_m)}), <a class="code" href="classplayrho_1_1InvalidArgument.html">InvalidArgument</a>);</div><div class="line">    EXPECT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#ac650be379a8f0b6b51a008caca23d744">CreateFixture</a>(*bodyA, <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf(WorldConf{}.maxVertexRadius * 2)}), <a class="code" href="classplayrho_1_1InvalidArgument.html">InvalidArgument</a>);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixtureA = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#ac650be379a8f0b6b51a008caca23d744">CreateFixture</a>(*bodyA, <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(1_m)});</div><div class="line">    ASSERT_NE(fixtureA, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(*bodyA), std::size_t(1));</div><div class="line">    EXPECT_FALSE(other.TouchProxies(*fixtureA));</div><div class="line">    </div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(fixtureA));</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(*bodyA), std::size_t(0));</div><div class="line">    </div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(static_cast&lt;Fixture*&gt;(<span class="keyword">nullptr</span>)));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> bodyC = other.CreateBody();</div><div class="line">    ASSERT_NE(bodyC, <span class="keyword">nullptr</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixtureC = other.CreateFixture(*bodyC, <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(1_m)});</div><div class="line">    ASSERT_NE(fixtureC, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(fixtureC));</div><div class="line">    </div><div class="line">    EXPECT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#ac650be379a8f0b6b51a008caca23d744">CreateFixture</a>(*bodyC, <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf(1_m)}), <a class="code" href="classplayrho_1_1InvalidArgument.html">InvalidArgument</a>);</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SynchronizeProxies)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    </div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf).<a name="a75"></a><a class="code" href="structplayrho_1_1StepStats.html#aaa9b52669cc1a5c973e02b0191fe3ad1">pre</a>.<a name="a76"></a><a class="code" href="structplayrho_1_1PreStepStats.html#aa74721e50128fa65a1de046dbf368743">proxiesMoved</a>, <a class="code" href="structplayrho_1_1PreStepStats.html#a3d2ba1ef027e1612d7631cc1a3c0de33">PreStepStats::counter_type</a>(0));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> bodyA = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    bodyA-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(1_m)});</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf).<a class="code" href="structplayrho_1_1StepStats.html#aaa9b52669cc1a5c973e02b0191fe3ad1">pre</a>.<a class="code" href="structplayrho_1_1PreStepStats.html#aa74721e50128fa65a1de046dbf368743">proxiesMoved</a>, <a class="code" href="structplayrho_1_1PreStepStats.html#a3d2ba1ef027e1612d7631cc1a3c0de33">PreStepStats::counter_type</a>(0));</div><div class="line">    <a name="a77"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a18d4f68807190fdf745e1b7a6eeeeefc">SetLocation</a>(*bodyA, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{10_m, -4_m});</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf).<a class="code" href="structplayrho_1_1StepStats.html#aaa9b52669cc1a5c973e02b0191fe3ad1">pre</a>.<a class="code" href="structplayrho_1_1PreStepStats.html#aa74721e50128fa65a1de046dbf368743">proxiesMoved</a>, <a class="code" href="structplayrho_1_1PreStepStats.html#a3d2ba1ef027e1612d7631cc1a3c0de33">PreStepStats::counter_type</a>(1));</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SetTypeOfBody)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    <span class="keyword">auto</span> other = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    other.<a name="a78"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#ac18971aed32f82e4f712bc7e663be747">SetType</a>(*body, BodyType::Static);</div><div class="line">    EXPECT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#ac18971aed32f82e4f712bc7e663be747">SetType</a>(*body, BodyType::Static);</div><div class="line">    EXPECT_EQ(body-&gt;GetType(), BodyType::Static);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, RegisterBodyForProxies)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    EXPECT_FALSE(world.<a name="a79"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#af26a312fc60d4c9fab75dfbfb320ad00">RegisterForProxies</a>(static_cast&lt;Body*&gt;(<span class="keyword">nullptr</span>)));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af26a312fc60d4c9fab75dfbfb320ad00">RegisterForProxies</a>(body));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, RegisterFixtureForProxies)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af26a312fc60d4c9fab75dfbfb320ad00">RegisterForProxies</a>(static_cast&lt;Fixture*&gt;(<span class="keyword">nullptr</span>)));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(1_m)});</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af26a312fc60d4c9fab75dfbfb320ad00">RegisterForProxies</a>(fixture));</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, Query)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    ASSERT_EQ(<a name="a80"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body-&gt;IsAccelerable());</div><div class="line">    ASSERT_FALSE(body-&gt;IsImpenetrable());</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), 0_m);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), 0_m);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> conf = <a name="_a81"></a><a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a name="a82"></a><a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a name="a83"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a name="a84"></a><a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#afeeb64f8bbd439af0e350288e16da2e7">GetChildCount</a>(conf), <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf});</div><div class="line">    ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    stepConf.<a name="a85"></a><a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(<a name="a86"></a><a class="code" href="group__PhysicalQuantities.html#ga250898c9929b0e6eaf56a1967c568888">Time</a>(0));</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line"></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <a class="code" href="namespaceplayrho_1_1d2.html#a52ca8acb99e3c3591d13ca912282470e">Query</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1AABB.html">AABB</a>{v1, v2}, [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">        });</div><div class="line">        EXPECT_EQ(foundOurs, 1);</div><div class="line">        EXPECT_EQ(foundOthers, 0);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, <a name="a87"></a><a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> p0 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{-10_m, +3_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b0 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(p0));</div><div class="line">    ASSERT_NE(b0-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf{1_m}}), <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> p1 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(p1));</div><div class="line">    ASSERT_NE(b1-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf{0.1_m}}), <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Static).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(<a class="code" href="structplayrho_1_1Vector.html">Length2</a>{-100_m, -100_m}));</div><div class="line">    ASSERT_NE(b2-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{EdgeShapeConf{Length2{}, Length2{-20_m, -20_m}}}), <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body-&gt;IsAccelerable());</div><div class="line">    ASSERT_FALSE(body-&gt;IsImpenetrable());</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), 0_m);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), 0_m);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> conf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf};</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#afeeb64f8bbd439af0e350288e16da2e7">GetChildCount</a>(shape), <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    stepConf.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(<a class="code" href="group__PhysicalQuantities.html#ga250898c9929b0e6eaf56a1967c568888">Time</a>(0));</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{-2_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = <a class="code" href="structplayrho_1_1Vector.html">Length2</a>{+2_m, 0_m};</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">                    [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, <a class="code" href="structplayrho_1_1Vector.html">Length2</a>, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::ResetRay;</div><div class="line">        });</div><div class="line">        EXPECT_FALSE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 1);</div><div class="line">        EXPECT_EQ(foundOthers, 1);</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = Length2{-2_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = Length2{+2_m, 0_m};</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">                    [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::Terminate;</div><div class="line">        });</div><div class="line">        EXPECT_TRUE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 1);</div><div class="line">        EXPECT_EQ(foundOthers, 0);</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = Length2{-2_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = Length2{+2_m, 0_m};</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">                                    [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::IgnoreFixture;</div><div class="line">        });</div><div class="line">        EXPECT_FALSE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 1);</div><div class="line">        EXPECT_EQ(foundOthers, 1);</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = Length2{ +5_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = Length2{+10_m, 0_m};</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">                                    [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::IgnoreFixture;</div><div class="line">        });</div><div class="line">        EXPECT_FALSE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 0);</div><div class="line">        EXPECT_EQ(foundOthers, 0);</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = Length2{-2_m, 0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = Length2{+2_m, 0_m};</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">                                    [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::ClipRay;</div><div class="line">        });</div><div class="line">        EXPECT_TRUE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 1);</div><div class="line">        EXPECT_EQ(foundOthers, 0);</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p2 = Length2{-3_m,  0_m};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> p3 = Length2{+2_m, 10_m};</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> foundOurs = 0;</div><div class="line">        <span class="keyword">auto</span> foundOthers = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{p2, p3, <a class="code" href="classplayrho_1_1BoundedValue.html">UnitInterval&lt;Real&gt;</a>{1}},</div><div class="line">          [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>* f, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a> i, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            <span class="keywordflow">if</span> (f == fixture &amp;&amp; i == 0)</div><div class="line">            {</div><div class="line">                ++foundOurs;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                ++foundOthers;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::ResetRay;</div><div class="line">        });</div><div class="line">        EXPECT_FALSE(retval);</div><div class="line">        EXPECT_EQ(foundOurs, 0);</div><div class="line">        EXPECT_EQ(foundOthers, 0);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> found = 0;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> rci = <a class="code" href="structplayrho_1_1detail_1_1RayCastInput.html">RayCastInput</a>{Length2{-100_m, -101_m}, Length2{-120_m, -121_m}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.9f}};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> retval = <a class="code" href="group__RayCastGroup.html#gabc2e992343e201f48c1956753a530247">RayCast</a>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a9e88ff1fed5897d1f35bdca45b0d3769">GetTree</a>(), rci, [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Fixture.html">Fixture</a>*, <a class="code" href="namespaceplayrho.html#aed352724e203ca09595faf0dc6a76e5c">ChildCounter</a>, Length2, <a class="code" href="classplayrho_1_1d2_1_1UnitVec.html">UnitVec</a>) {</div><div class="line">            ++found;</div><div class="line">            <span class="keywordflow">return</span> RayCastOpcode::Terminate;</div><div class="line">        });</div><div class="line">        EXPECT_FALSE(retval);</div><div class="line">        EXPECT_EQ(found, 0);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, ClearForcesFreeFunction)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a name="a88"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ab74e3b01c0f344b7eea842e391567c46">UseLinearAcceleration</a>(EarthlyGravity));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body-&gt;IsAccelerable());</div><div class="line">    ASSERT_FALSE(body-&gt;IsImpenetrable());</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(EarthlyGravity));</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = Length2{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = Length2{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> conf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    <a name="a89"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a88d1ffd34c57bb9737f51f0dc918ea0d">ApplyForceToCenter</a>(*body, <a class="code" href="structplayrho_1_1Vector.html">Force2</a>(2_N, 4_N));</div><div class="line">    ASSERT_NE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(EarthlyGravity));</div><div class="line">    ASSERT_NE(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">    </div><div class="line">    <a name="a90"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#aa8a757a3ee66fa157cbf1ffafdf556d4">ClearForces</a>(world);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), 0_mps2);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SetAccelerationsFunctionalFF)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> a1 = <a name="_a91"></a><a class="code" href="structplayrho_1_1d2_1_1Acceleration.html">Acceleration</a>{</div><div class="line">        <a class="code" href="structplayrho_1_1Vector.html">LinearAcceleration2</a>{1_mps2, 2_mps2}, 2.1f * <a name="a92"></a><a class="code" href="group__PhysicalUnits.html#gaea803bc1b5ab2d6a9959f4d4edc06a8b">RadianPerSquareSecond</a></div><div class="line">    };</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> a2 = a1 * 2;</div><div class="line">    ASSERT_EQ(a1.linear * 2, a2.linear);</div><div class="line">    ASSERT_EQ(a1.angular * 2, a2.angular);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(b1, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_TRUE(b1-&gt;IsAccelerable());</div><div class="line">    <a name="a93"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a438e172db303ae0ab53263bc6af419ad">SetAcceleration</a>(*b1, a1);</div><div class="line">    ASSERT_EQ(<a name="a94"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b1), a1);</div><div class="line">  </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(b2, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_TRUE(b2-&gt;IsAccelerable());</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1Body.html#a438e172db303ae0ab53263bc6af419ad">SetAcceleration</a>(*b2, a2);</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b2), a2);</div><div class="line">   </div><div class="line">    <a name="a95"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a5c6e8e38d0d92d2c59fb4235bda2c2b3">SetAccelerations</a>(world, [](<span class="keyword">const</span> <a name="_a96"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html">Body</a>&amp; b){ <span class="keywordflow">return</span> <a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(b) * 2; });</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b1), a1 * 2);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b2), a2 * 2);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SetLinearAccelerationsFF)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> a1 = <a class="code" href="structplayrho_1_1d2_1_1Acceleration.html">Acceleration</a>{</div><div class="line">        <a class="code" href="structplayrho_1_1Vector.html">LinearAcceleration2</a>{1_mps2, 2_mps2}, 2.1f * <a class="code" href="group__PhysicalUnits.html#gaea803bc1b5ab2d6a9959f4d4edc06a8b">RadianPerSquareSecond</a></div><div class="line">    };</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> a2 = a1 * 2;</div><div class="line">    ASSERT_EQ(a1.linear * 2, a2.linear);</div><div class="line">    ASSERT_EQ(a1.angular * 2, a2.angular);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(b1, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_TRUE(b1-&gt;IsAccelerable());</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1Body.html#a438e172db303ae0ab53263bc6af419ad">SetAcceleration</a>(*b1, a1);</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b1), a1);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(b2, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_TRUE(b2-&gt;IsAccelerable());</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1Body.html#a438e172db303ae0ab53263bc6af419ad">SetAcceleration</a>(*b2, a2);</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b2), a2);</div><div class="line"></div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b1), a1);</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b2), a2);</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a5c6e8e38d0d92d2c59fb4235bda2c2b3">SetAccelerations</a>(world, a1.linear * 2);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b1), (<a class="code" href="structplayrho_1_1d2_1_1Acceleration.html">Acceleration</a>{a1.<a name="a97"></a><a class="code" href="structplayrho_1_1d2_1_1Acceleration.html#aede18b49c56f6f4612c1bbb601ab5e00">linear</a> * 2, a1.angular}));</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#acafaac4ef15f7416f464dff9b19780fa">GetAcceleration</a>(*b2), (<a class="code" href="structplayrho_1_1d2_1_1Acceleration.html">Acceleration</a>{a1.<a class="code" href="structplayrho_1_1d2_1_1Acceleration.html#aede18b49c56f6f4612c1bbb601ab5e00">linear</a> * 2, a2.angular}));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, FindClosestBodyFF)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    ASSERT_EQ(<a name="a98"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#afd5009f0701e56be66936edcd9308111">FindClosestBody</a>(world, Length2{}), <span class="keyword">nullptr</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(Length2{10_m, 10_m}));</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#afd5009f0701e56be66936edcd9308111">FindClosestBody</a>(world, Length2{0_m, 0_m}), b1);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(Length2{1_m, -2_m}));</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#afd5009f0701e56be66936edcd9308111">FindClosestBody</a>(world, Length2{0_m, 0_m}), b2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> b3 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(Length2{-5_m, 4_m}));</div><div class="line">    EXPECT_NE(<a class="code" href="classplayrho_1_1d2_1_1World.html#afd5009f0701e56be66936edcd9308111">FindClosestBody</a>(world, Length2{0_m, 0_m}), b3);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#afd5009f0701e56be66936edcd9308111">FindClosestBody</a>(world, Length2{0_m, 0_m}), b2);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, GetShapeCountFreeFunction)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    ASSERT_EQ(<a name="a99"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a16741ddd7414c860451f4b6ba92d7bf4">GetShapeCount</a>(world), std::size_t(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = Length2{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = Length2{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shapeConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape1 = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{shapeConf};</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture1 = body-&gt;CreateFixture(shape1);</div><div class="line">    ASSERT_NE(fixture1, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a16741ddd7414c860451f4b6ba92d7bf4">GetShapeCount</a>(world), std::size_t(1));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture2 = body-&gt;CreateFixture(shape1);</div><div class="line">    ASSERT_NE(fixture2, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a16741ddd7414c860451f4b6ba92d7bf4">GetShapeCount</a>(world), std::size_t(1));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape2 = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{shapeConf};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture3 = body-&gt;CreateFixture(shape2);</div><div class="line">    ASSERT_NE(fixture3, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a16741ddd7414c860451f4b6ba92d7bf4">GetShapeCount</a>(world), std::size_t(2));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, GetFixtureCountFreeFunction)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = Length2{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = Length2{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shapeConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}</div><div class="line">        .<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{shapeConf};</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture1 = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture1, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(1));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture2 = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture2, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(2));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture3 = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture3, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a2b995406bae81c78866c12b59432a931">GetFixtureCount</a>(world), std::size_t(3));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, AwakenFreeFunction)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic));</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body-&gt;IsAccelerable());</div><div class="line">    ASSERT_FALSE(body-&gt;IsImpenetrable());</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0) * <a name="a100"></a><a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = Length2{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = Length2{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2)};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    ASSERT_TRUE(body-&gt;IsAwake());</div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    <span class="keywordflow">while</span> (body-&gt;IsAwake())</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    ASSERT_FALSE(body-&gt;IsAwake());</div><div class="line">    </div><div class="line">    <a name="a101"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a4834708af29bcc9ae39ebfc2b9f580f6">Awaken</a>(world);</div><div class="line">    EXPECT_TRUE(body-&gt;IsAwake());</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, GetTouchingCountFreeFunction)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    EXPECT_EQ(<a name="a102"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    stepConf.SetInvTime(100_Hz);</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> groundConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}</div><div class="line">        .<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(<a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(-40.0f, 0.0f) * <a name="a103"></a><a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(40.0f, 0.0f) * Meter);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> lowerBodyConf = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(<a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(0.0f, 0.5f) * Meter);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> diskConf = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(10_kgpm2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> smallerDiskConf = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(diskConf).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(0.5_m);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">    lowerBody-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf));</div><div class="line">    </div><div class="line">    ASSERT_EQ(<a name="a104"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world), 1);</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) &gt; 0)</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">        EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(1));</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, ShiftOrigin)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> origin = Length2{0_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> location = Length2{1_m, 1_m};</div><div class="line">    </div><div class="line">    ASSERT_NE(origin, location);</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    EXPECT_NO_THROW(world.<a name="a105"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a810c702555c946c686e4062c7966008c">ShiftOrigin</a>(origin));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> bodyConf = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    bodyConf.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(location);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(bodyConf);</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), location);</div><div class="line"></div><div class="line">    EXPECT_NO_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a810c702555c946c686e4062c7966008c">ShiftOrigin</a>(location));</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), origin);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, DynamicEdgeBodyHasCorrectMass)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> bodyConf = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    bodyConf.<a name="a106"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(bodyConf);</div><div class="line">    ASSERT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v1 = Length2{-1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> v2 = Length2{+1_m, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> conf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(1_m).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(v1, v2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf};</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho_1_1d2.html#a8d29a87b8865a1e42c35360ddc2bb6bf">GetVertexRadius</a>(shape, 0), 1_m);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(fixture-&gt;GetDensity(), 1_kgpm2);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> circleMass = <a class="code" href="group__PhysicalQuantities.html#ga5edfc295416b7690b4f949223b551bc1">Mass</a>{fixture-&gt;GetDensity() * (<a class="code" href="namespaceplayrho.html#a83e2e155484aefe7098ddf4248bff8ca">Pi</a> * <a name="a107"></a><a class="code" href="group__Math.html#ga9163760181cfb59593537b444defe6cf">Square</a>(<a class="code" href="namespaceplayrho_1_1d2.html#a8d29a87b8865a1e42c35360ddc2bb6bf">GetVertexRadius</a>(shape, 0)))};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> rectMass = <a class="code" href="group__PhysicalQuantities.html#ga5edfc295416b7690b4f949223b551bc1">Mass</a>{fixture-&gt;GetDensity() * (<a class="code" href="namespaceplayrho_1_1d2.html#a8d29a87b8865a1e42c35360ddc2bb6bf">GetVertexRadius</a>(shape, 0) * 2 * <a name="a108"></a><a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(v2 - v1))};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> totalMass = <a class="code" href="group__PhysicalQuantities.html#ga5edfc295416b7690b4f949223b551bc1">Mass</a>{circleMass + rectMass};</div><div class="line">    </div><div class="line">    EXPECT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    EXPECT_NEAR(static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{body-&gt;GetInvMass() * 1_kg}),</div><div class="line">                static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{1_kg / totalMass}),</div><div class="line">                0.000001);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CreateAndDestroyJoint)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    EXPECT_NE(body1, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_NE(body2, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a54933e742508cac5c0b219c653c67674">GetBodyCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(2));</div><div class="line">    EXPECT_EQ(<a name="a109"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().empty());</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().end());</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> anchorA = Length2{+0.4_m, -1.2_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> anchorB = Length2{-2.3_m, +0.7_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> joint = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1DistanceJointConf.html">DistanceJointConf</a>{body1, body2, anchorA, anchorB});</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(1));</div><div class="line">    EXPECT_FALSE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().empty());</div><div class="line">    EXPECT_NE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().end());</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> first = *world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin();</div><div class="line">    EXPECT_EQ(joint, first);</div><div class="line">    EXPECT_EQ(<a name="a110"></a><a class="code" href="classplayrho_1_1d2_1_1Joint.html#ab274cbc54f178cbd8236401727296dcf">GetType</a>(*joint), JointType::Distance);</div><div class="line">    EXPECT_EQ(joint-&gt;GetBodyA(), body1);</div><div class="line">    EXPECT_EQ(joint-&gt;GetBodyB(), body2);</div><div class="line">    EXPECT_EQ(joint-&gt;GetAnchorA(), anchorA);</div><div class="line">    EXPECT_EQ(joint-&gt;GetAnchorB(), anchorB);</div><div class="line">    EXPECT_FALSE(joint-&gt;GetCollideConnected());</div><div class="line"></div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(joint);</div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a8902de592d92cefc72d2e984d591a27d">GetJointCount</a>(world), <a class="code" href="namespaceplayrho.html#aeb8ea60dc388d1e92e2e6fa277a32495">JointCounter</a>(0));</div><div class="line">    EXPECT_TRUE(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().empty());</div><div class="line">    EXPECT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().begin(), world.<a class="code" href="classplayrho_1_1d2_1_1World.html#acd41faec72cca3f9225fb389123d6801">GetJoints</a>().end());</div><div class="line">    </div><div class="line">    EXPECT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a name="_a111"></a><a class="code" href="structplayrho_1_1d2_1_1JointConf.html">JointConf</a>{JointType::Unknown}), <a class="code" href="classplayrho_1_1InvalidArgument.html">InvalidArgument</a>);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, MaxBodies)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(MaxBodies){0}; i &lt; <a class="code" href="namespaceplayrho.html#a7e8a3bed4ddbbfdbaf170055a932dfed">MaxBodies</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        EXPECT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(), <a name="_a112"></a><a class="code" href="classplayrho_1_1LengthError.html">LengthError</a>);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, MaxJoints)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    ASSERT_NE(body1, <span class="keyword">nullptr</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">    ASSERT_NE(body2, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(MaxJoints){0}; i &lt; <a class="code" href="namespaceplayrho.html#a4ea7793500223bfe5600812095e41a72">MaxJoints</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> joint = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1RopeJointConf.html">RopeJointConf</a>{body1, body2});</div><div class="line">        ASSERT_NE(joint, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    {</div><div class="line">        EXPECT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(<a class="code" href="structplayrho_1_1d2_1_1RopeJointConf.html">RopeJointConf</a>{body1, body2}), <a class="code" href="classplayrho_1_1LengthError.html">LengthError</a>);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, StepZeroTimeDoesNothing)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> def;</div><div class="line">    def.<a name="a113"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{31.9_m, -19.24_m};</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    def.<a name="a114"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#aca2c87d68e5476d3c1443a5360fac747">linearAcceleration</a> = <a class="code" href="namespaceplayrho_1_1d2.html#aff60cf79e47bc61f2b57a9fe990896a6">EarthlyGravity</a>;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(def);</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a name="a115"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.0f} * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = 0_s;</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> pos = body-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        <a name="a116"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, time_inc);</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(pos));</div><div class="line">        pos = body-&gt;GetLocation();</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">        EXPECT_TRUE(<a name="a117"></a><a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) / 1_mps}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel) / 1_mps}));</div><div class="line">        vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, GravitationalBodyMovement)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> a = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(-10);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> p0 = Length2{0_m, 1_m};</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.location = p0;</div><div class="line">    body_def.linearAcceleration = <a class="code" href="structplayrho_1_1Vector.html">LinearAcceleration2</a>{0, a * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> t = .01_s;</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_FALSE(body-&gt;IsImpenetrable());</div><div class="line">    EXPECT_EQ(body-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), p0);</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, t);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), a * (t * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{1}) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(p0));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(p0) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) * t);</div><div class="line"></div><div class="line">    p0 = body-&gt;GetLocation();</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, t);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), a * (t * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(p0));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(p0) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) * t);</div><div class="line">    </div><div class="line">    p0 = body-&gt;GetLocation();</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, t);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_NEAR(<span class="keywordtype">double</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) / 1_mps}),</div><div class="line">                <span class="keywordtype">double</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{a * (t * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{3}) / 1_s}), 0.00001);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(p0));</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(p0) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) * t);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, BodyAngleDoesntGrowUnbounded)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}</div><div class="line">                                       .<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic)</div><div class="line">                                       .<a name="a118"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#aab6507e3c5f16b71bc1274dc71d30563">UseAngularVelocity</a>(10_rad / <a name="a119"></a><a class="code" href="group__PhysicalUnits.html#ga52ac917bbbd4ffab2322fb6f4f8d27c3">Second</a>));</div><div class="line">    ASSERT_EQ(<a name="a120"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(*body), 0_rad);</div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    <span class="keyword">auto</span> lastAngle = 0_rad;</div><div class="line">    <span class="keyword">auto</span> maxAngle = 0_rad;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 1000000; ++i)</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> angle = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(*body);</div><div class="line">        EXPECT_NE(angle, lastAngle);</div><div class="line">        ASSERT_LE(angle, 360_deg);</div><div class="line">        maxAngle = std::max(maxAngle, angle);</div><div class="line">        lastAngle = angle;</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, BodyAccelPerSpecWithNoVelOrPosIterations)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    </div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> def;</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{31.9_m, -19.24_m};</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#aca2c87d68e5476d3c1443a5360fac747">linearAcceleration</a> = <a class="code" href="namespaceplayrho_1_1d2.html#aff60cf79e47bc61f2b57a9fe990896a6">EarthlyGravity</a>;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(def);</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.0f} * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = 0.01_s;</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> pos = body-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, time_inc, 0, 0);</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>));</div><div class="line">        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(pos));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(pos) + ((<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity) * time_inc) * time_inc));</div><div class="line">        pos = body-&gt;GetLocation();</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel));</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) / 1_mps},</div><div class="line">                                <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity) * time_inc) / 1_mps}));</div><div class="line">        vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, BodyAccelRevPerSpecWithNegativeTimeAndNoVelOrPosIterations)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> def;</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{31.9_m, -19.24_m};</div><div class="line">    def.<a name="a121"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a> = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{0, -9.8_mps};</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#aca2c87d68e5476d3c1443a5360fac747">linearAcceleration</a> = <a class="code" href="namespaceplayrho_1_1d2.html#aff60cf79e47bc61f2b57a9fe990896a6">EarthlyGravity</a>;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(def);</div><div class="line">    ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body-&gt;GetLocation(), def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), -9.8_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.0f} * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = -0.01_s;</div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    stepConf.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(time_inc);</div><div class="line">    stepConf.<a name="a122"></a><a class="code" href="classplayrho_1_1StepConf.html#a457b239d0d715ceab05b1c78425633a0">dtRatio</a> = -1;</div><div class="line">    stepConf.regPositionIterations = 0;</div><div class="line">    stepConf.regVelocityIterations = 0;</div><div class="line">    stepConf.toiPositionIterations = 0;</div><div class="line">    stepConf.toiVelocityIterations = 0;</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> pos = body-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 99; ++i)</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLinearAcceleration()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity));</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a>));</div><div class="line">        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(pos));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(pos) + ((<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity) * time_inc) * time_inc));</div><div class="line">        pos = body-&gt;GetLocation();</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), 0_mps);</div><div class="line">        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel));</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body)) / 1_mps},</div><div class="line">                                <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(vel) + <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(EarthlyGravity) * time_inc) / 1_mps}));</div><div class="line">        vel = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyContactListener: <span class="keyword">public</span> <a name="_a123"></a><a class="code" href="classplayrho_1_1d2_1_1ContactListener.html">ContactListener</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">using</span> PreSolver = std::function&lt;void(Contact&amp;, const Manifold&amp;)&gt;;</div><div class="line">    <span class="keyword">using</span> PostSolver = std::function&lt;void(Contact&amp;, const ContactImpulsesList&amp;, ContactListener::iteration_type)&gt;;</div><div class="line">    <span class="keyword">using</span> Ender = std::function&lt;void(Contact&amp;)&gt;;</div><div class="line"></div><div class="line">    MyContactListener(PreSolver&amp;&amp; pre, PostSolver&amp;&amp; post, Ender&amp;&amp; end): presolver(pre), postsolver(post), ender(end) {}</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> ~MyContactListener() {}</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> <a name="a124"></a><a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a9737a46135fa144f57dcf5767a44dd49">BeginContact</a>(<a name="_a125"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        ++begin_contacts;</div><div class="line">        contacting = <span class="keyword">true</span>;</div><div class="line">        touching = contact.<a name="a126"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#a0bf45a339742f6db83b9e6ca4e54fdd1">IsTouching</a>();</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fA = contact.<a name="a127"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#acf266ef338a99dc9f63837c375706fe4">GetFixtureA</a>();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fB = contact.<a name="a128"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#a461a1dea95676477646a0058a5afb0d3">GetFixtureB</a>();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> bA = fA-&gt;<a name="a129"></a><a class="code" href="classplayrho_1_1d2_1_1Fixture.html#a06b4d3e9a3520768bc336da56083f566">GetBody</a>();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> bB = fB-&gt;GetBody();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> w = bA-&gt;GetWorld();</div><div class="line">        body_a[0] = bA-&gt;GetLocation();</div><div class="line">        body_b[0] = bB-&gt;GetLocation();</div><div class="line">        </div><div class="line">        EXPECT_THROW(w-&gt;CreateBody(), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> typeA = bA-&gt;GetType();</div><div class="line">        <span class="keywordflow">if</span> (typeA != BodyType::Kinematic)</div><div class="line">        {</div><div class="line">            EXPECT_NO_THROW(bA-&gt;SetType(typeA));</div><div class="line">            EXPECT_THROW(bA-&gt;SetType(BodyType::Kinematic), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        }</div><div class="line">        EXPECT_THROW(w-&gt;Destroy(bA), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(w-&gt;Clear(), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(w-&gt;CreateJoint(<a class="code" href="structplayrho_1_1d2_1_1DistanceJointConf.html">DistanceJointConf</a>{bA, bB}), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(w-&gt;Step(stepConf), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(w-&gt;ShiftOrigin(Length2{}), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(bA-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{DiskShapeConf{}}), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        EXPECT_THROW(bA-&gt;Destroy(fA), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> EndContact(<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        ++end_contacts;</div><div class="line">        contacting = <span class="keyword">false</span>;</div><div class="line">        touching = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a0bf45a339742f6db83b9e6ca4e54fdd1">IsTouching</a>();</div><div class="line"></div><div class="line">        body_a[1] = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#acf266ef338a99dc9f63837c375706fe4">GetFixtureA</a>()-&gt;<a class="code" href="classplayrho_1_1d2_1_1Fixture.html#a06b4d3e9a3520768bc336da56083f566">GetBody</a>()-&gt;GetLocation();</div><div class="line">        body_b[1] = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a461a1dea95676477646a0058a5afb0d3">GetFixtureB</a>()-&gt;<a class="code" href="classplayrho_1_1d2_1_1Fixture.html#a06b4d3e9a3520768bc336da56083f566">GetBody</a>()-&gt;GetLocation();</div><div class="line">        </div><div class="line">        <span class="keywordflow">if</span> (ender)</div><div class="line">        {</div><div class="line">            ender(contact);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> PreSolve(<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact, <span class="keyword">const</span> <a name="_a130"></a><a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp; oldManifold)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        ++pre_solves;</div><div class="line">        presolver(contact, oldManifold);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> PostSolve(<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact, <span class="keyword">const</span> <a name="_a131"></a><a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp; impulse, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a> solved)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        ++post_solves;</div><div class="line">        postsolver(contact, impulse, solved);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">unsigned</span> begin_contacts = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> end_contacts = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> pre_solves = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> post_solves = 0;</div><div class="line">    <span class="keywordtype">bool</span> contacting = <span class="keyword">false</span>;</div><div class="line">    <span class="keywordtype">bool</span> touching = <span class="keyword">false</span>;</div><div class="line">    Length2 body_a[2] = {Length2{}, Length2{}};</div><div class="line">    Length2 body_b[2] = {Length2{}, Length2{}};</div><div class="line">    PreSolver presolver;</div><div class="line">    PostSolver postsolver;</div><div class="line">    Ender ender;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> stepConf{};</div><div class="line">};</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, NoCorrectionsWithNoVelOrPosIterations)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> x = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(10); <span class="comment">// other test parameters tuned to this value being 10</span></div><div class="line"></div><div class="line">    <span class="keyword">auto</span> presolved = <span class="keywordtype">unsigned</span>{0};</div><div class="line">    <span class="keyword">auto</span> postsolved = <span class="keywordtype">unsigned</span>{0};</div><div class="line">    MyContactListener listener{</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;) { ++presolved; },</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp;, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a>) { ++postsolved; },</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {},</div><div class="line">    };</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    world.<a name="a132"></a><a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line">    </div><div class="line">    ASSERT_EQ(listener.begin_contacts, <span class="keywordtype">unsigned</span>(0));</div><div class="line">    ASSERT_EQ(listener.end_contacts, <span class="keywordtype">unsigned</span>(0));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">true</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(1_m).<a name="a133"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2)};</div><div class="line">    </div><div class="line">    body_def.<a name="a134"></a><a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#adaafd1c41a01e0708a9a18b125133ac7">location</a> = Length2{-x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m};</div><div class="line">    body_def.linearVelocity = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{+x * 1_mps, 0_mps};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body_a = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(body_a, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body_a-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    EXPECT_TRUE(body_a-&gt;IsSpeedable());</div><div class="line">    EXPECT_TRUE(body_a-&gt;IsAccelerable());</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture1 = body_a-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture1, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    body_def.location = Length2{+x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m};</div><div class="line">    body_def.linearVelocity = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{-x * 1_mps, 0_mps};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body_b = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(body_b, <span class="keyword">nullptr</span>);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture2 = body_b-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture2, <span class="keyword">nullptr</span>);</div><div class="line">    EXPECT_EQ(body_b-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    EXPECT_TRUE(body_b-&gt;IsSpeedable());</div><div class="line">    EXPECT_TRUE(body_b-&gt;IsAccelerable());</div><div class="line"></div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), +x * 1_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), -x * 1_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), 0_mps);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = .01_s;</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> pos_a = body_a-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> pos_b = body_b-&gt;GetLocation();</div><div class="line">    ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_a), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_b));</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> conf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    conf.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(time_inc);</div><div class="line">    conf.<a name="a135"></a><a class="code" href="classplayrho_1_1StepConf.html#a03001af44bdce6e20979ccc98db4506b">regPositionIterations</a> = 0;</div><div class="line">    conf.regVelocityIterations = 0;</div><div class="line">    conf.toiPositionIterations = 0;</div><div class="line">    conf.toiVelocityIterations = 0;</div><div class="line">    conf.tolerance = <a class="code" href="group__FixedMath.html#ga935fa93a69f58baf20b00e14461d51e7">nextafter</a>(<a class="code" href="namespaceplayrho.html#a874b78de5f6a519116cca5fc0e3d0ce2">StripUnit</a>(conf.targetDepth), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0}) * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> steps = <span class="keywordtype">unsigned</span>{0};</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_a) &lt; (x * Meter) &amp;&amp; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_b) &gt; (-x * Meter))</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(conf);</div><div class="line">        ++steps;</div><div class="line">        </div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) / Meter},</div><div class="line">                                <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_a) + x * time_inc * 1_mps) / Meter}));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_a-&gt;GetLocation()), 0_m);</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()) / Meter},</div><div class="line">                                <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(pos_b) - x * time_inc * 1_mps) / Meter}));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_b-&gt;GetLocation()), 0_m);</div><div class="line"></div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), +x * 1_mps);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), 0_mps);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), -x * 1_mps);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), 0_mps);</div><div class="line"></div><div class="line">        pos_a = body_a-&gt;GetLocation();</div><div class="line">        pos_b = body_b-&gt;GetLocation();</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// d = v * t</span></div><div class="line">    <span class="comment">// d = 20, v = 10:</span></div><div class="line">    <span class="comment">// 20 = 10 * t, t = d/v = 20 / 10 = 2</span></div><div class="line">    <span class="comment">// steps = t / time_inc = 200</span></div><div class="line">    EXPECT_GE(steps, 199u);</div><div class="line">    EXPECT_LE(steps, 201u);</div><div class="line">    <span class="comment">//EXPECT_EQ(int64_t(steps), static_cast&lt;int64_t&gt;(round(((x * 2) / x) / time_inc)));</span></div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, HeavyOnLight)</div><div class="line">{</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> AngularSlop = (<a class="code" href="namespaceplayrho.html#a83e2e155484aefe7098ddf4248bff8ca">Pi</a> * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2} * 1_rad) / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{180};</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> LargerLinearSlop = <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">playrho::Meter</a> / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">playrho::Real</a>(200);</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> SmallerLinearSlop = <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">playrho::Meter</a> / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">playrho::Real</a>(1000);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> bd = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ab74e3b01c0f344b7eea842e391567c46">UseLinearAcceleration</a>(EarthlyGravity);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> upperBodyConf = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>(bd).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(<a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(0.0f, 6.0f) * Meter);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> lowerBodyConf = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>(bd).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(<a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(0.0f, 0.5f) * Meter);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> groundConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}</div><div class="line">        .<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(<a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(-40.0f, 0.0f) * Meter, <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>(40.0f, 0.0f) * Meter);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> diskConf = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(10_kgpm2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> smallerDiskConf = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(diskConf).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(0.5_m);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> biggerDiskConf = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>(diskConf).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(5.0_m);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> baseStepConf = []() {</div><div class="line">        <span class="keyword">auto</span> step = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{}.<a class="code" href="classplayrho_1_1StepConf.html#a3ece970cfb6bc348b826b278eb76382c">SetInvTime</a>(60_Hz);</div><div class="line">        <span class="keywordflow">return</span> step;</div><div class="line">    }();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> largerStepConf = [=](<a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> step) {</div><div class="line">        step.<a name="a136"></a><a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a> = LargerLinearSlop;</div><div class="line">        step.regMinSeparation = -LargerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">        step.toiMinSeparation = -LargerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.5f);</div><div class="line">        step.targetDepth = LargerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">        step.tolerance = LargerLinearSlop / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4);</div><div class="line">        step.maxLinearCorrection = LargerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(40);</div><div class="line">        step.maxAngularCorrection = AngularSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4};</div><div class="line">        step.aabbExtension = LargerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(20);</div><div class="line">        step.maxTranslation = <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{Meter * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4)};</div><div class="line">        step.velocityThreshold = (<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{8} / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{10}) * 1_mps;</div><div class="line">        step.maxSubSteps = std::uint8_t{48};</div><div class="line">        <span class="keywordflow">return</span> step;</div><div class="line">    }(baseStepConf);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> smallerStepConf = [=](<a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> step) {</div><div class="line">        step.linearSlop = SmallerLinearSlop;</div><div class="line">        step.regMinSeparation = -SmallerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">        step.toiMinSeparation = -SmallerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.5f);</div><div class="line">        step.targetDepth = SmallerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">        step.tolerance = SmallerLinearSlop / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4);</div><div class="line">        step.maxLinearCorrection = SmallerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(40);</div><div class="line">        step.maxAngularCorrection = AngularSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4};</div><div class="line">        step.aabbExtension = SmallerLinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(20);</div><div class="line">        step.maxTranslation = <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{Meter * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4)};</div><div class="line">        step.velocityThreshold = (<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{8} / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{10}) * 1_mps;</div><div class="line">        step.maxSubSteps = std::uint8_t{48};</div><div class="line">        <span class="keywordflow">return</span> step;</div><div class="line">    }(baseStepConf);</div><div class="line">    </div><div class="line">    <span class="comment">// Create lower body, then upper body using the larger step conf</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(SmallerLinearSlop)};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> upperBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(upperBodyConf);</div><div class="line">        ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lowerBody-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line"></div><div class="line">        lowerBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf));</div><div class="line">        upperBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(biggerDiskConf));</div><div class="line">        ASSERT_LT(<a name="a137"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*lowerBody), <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*upperBody));</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> upperBodysLowestPoint = <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation());</div><div class="line">        <span class="keyword">auto</span> numSteps = 0ul;</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) &gt; 0)</div><div class="line">        {</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(largerStepConf);</div><div class="line">            upperBodysLowestPoint = std::min(upperBodysLowestPoint, <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line">            ++numSteps;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="comment">// The least num steps is 145</span></div><div class="line">        EXPECT_EQ(numSteps, 145ul);</div><div class="line">        EXPECT_NEAR(static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(upperBodysLowestPoint / Meter)), 5.9475154876708984, 0.001);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Create upper body, then lower body using the larger step conf</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(SmallerLinearSlop)};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> upperBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(upperBodyConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">        ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lowerBody-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line"></div><div class="line">        lowerBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf));</div><div class="line">        upperBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(biggerDiskConf));</div><div class="line">        ASSERT_LT(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*lowerBody), <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*upperBody));</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> upperBodysLowestPoint = <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation());</div><div class="line">        <span class="keyword">auto</span> numSteps = 0ul;</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) &gt; 0)</div><div class="line">        {</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(largerStepConf);</div><div class="line">            upperBodysLowestPoint = std::min(upperBodysLowestPoint, <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line">            ++numSteps;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="comment">// Here we see that creating the upper body after the lower body, results in</span></div><div class="line">        <span class="comment">// a different step count, and a higher count at that.</span></div><div class="line">        EXPECT_EQ(numSteps, 152ul);</div><div class="line">        EXPECT_NEAR(static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(upperBodysLowestPoint / Meter)), 5.9470911026000977, 0.001);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Create lower body, then upper body using the smaller step conf</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(SmallerLinearSlop)};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> upperBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(upperBodyConf);</div><div class="line">        ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lowerBody-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line"></div><div class="line">        lowerBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf));</div><div class="line">        upperBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(biggerDiskConf));</div><div class="line">        ASSERT_LT(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*lowerBody), <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*upperBody));</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> upperBodysLowestPoint = <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation());</div><div class="line">        <span class="keyword">auto</span> numSteps = 0ul;</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) &gt; 0)</div><div class="line">        {</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(smallerStepConf);</div><div class="line">            upperBodysLowestPoint = std::min(upperBodysLowestPoint, <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line">            ++numSteps;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="comment">// This here is the highest step count.</span></div><div class="line">        <span class="comment">// XXX Is this a bug or did the algorithm just work least well here?</span></div><div class="line">        <span class="keywordflow">switch</span> (<span class="keyword">sizeof</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>))</div><div class="line">        {</div><div class="line">            <span class="keywordflow">case</span> 4: EXPECT_EQ(numSteps, 736ul); <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> 8: EXPECT_EQ(numSteps, 736ul); <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Here we see that the upper body at some point sunk into most of the lower body.</span></div><div class="line">        EXPECT_NEAR(static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(upperBodysLowestPoint / Meter)), 5.9473052024841309, 0.001);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Create upper body, then lower body using the smaller step conf</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(SmallerLinearSlop)};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> upperBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(upperBodyConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">        ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lowerBody-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line"></div><div class="line">        lowerBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf));</div><div class="line">        upperBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(biggerDiskConf));</div><div class="line">        ASSERT_LT(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*lowerBody), <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*upperBody));</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> upperBodysLowestPoint = <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation());</div><div class="line">        <span class="keyword">auto</span> numSteps = 0ul;</div><div class="line">        EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world), 2);</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) &gt; 0)</div><div class="line">        {</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(smallerStepConf);</div><div class="line">            EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(2));</div><div class="line">            upperBodysLowestPoint = std::min(upperBodysLowestPoint, <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line">            ++numSteps;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Given that this section of code is one of the two sections that</span></div><div class="line">        <span class="comment">// uses the smaller linear slop, I expect this block of code&#39;s step</span></div><div class="line">        <span class="comment">// count to be higher than either block using the larger linear slop.</span></div><div class="line">        <span class="comment">// I guess a step count of some 3.5 times higher is reasonable for</span></div><div class="line">        <span class="comment">// the step conf that&#39;s five times smaller.</span></div><div class="line">        <span class="keywordflow">switch</span> (<span class="keyword">sizeof</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>))</div><div class="line">        {</div><div class="line">            <span class="keywordflow">case</span> 4: EXPECT_EQ(numSteps, 724ul); <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> 8: EXPECT_EQ(numSteps, 724ul); <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        EXPECT_NEAR(static_cast&lt;double&gt;(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(upperBodysLowestPoint / Meter)), 5.9476470947265625, 0.001);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Create upper body, then lower body using the smaller step conf, and using sensors</span></div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(SmallerLinearSlop)};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(groundConf));</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> upperBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(upperBodyConf);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> lowerBody = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(lowerBodyConf);</div><div class="line">        ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lowerBody-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(upperBody-&gt;GetLocation()));</div><div class="line">        </div><div class="line">        lowerBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(smallerDiskConf), <a name="_a138"></a><a class="code" href="structplayrho_1_1d2_1_1FixtureConf.html">FixtureConf</a>{}.<a name="a139"></a><a class="code" href="structplayrho_1_1d2_1_1FixtureConf.html#ad27014718ffe5783fcc061b36656eaad">UseIsSensor</a>(<span class="keyword">true</span>));</div><div class="line">        upperBody-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(biggerDiskConf), <a class="code" href="structplayrho_1_1d2_1_1FixtureConf.html">FixtureConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1FixtureConf.html#ad27014718ffe5783fcc061b36656eaad">UseIsSensor</a>(<span class="keyword">true</span>));</div><div class="line">        ASSERT_LT(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*lowerBody), <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*upperBody));</div><div class="line">        </div><div class="line">        EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world), <a class="code" href="namespaceplayrho.html#a4106d8a0e998a2485196534514527a5a">BodyCounter</a>(2));</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(smallerStepConf);</div><div class="line">        EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#af8aabfb6390fed1c549e81700b0cd80e">GetTouchingCount</a>(world), <a class="code" href="namespaceplayrho.html#a2bf0674233f83e8b83b30db98332e129">ContactCounter</a>(2));</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, PerfectlyOverlappedSameCirclesStayPut)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius = 1_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(radius).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1))};</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> world = <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>{};</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">false</span>;</div><div class="line">    body_def.location = Length2{0_m, 0_m};</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(.01);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc);</div><div class="line">        EXPECT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">        EXPECT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, PerfectlyOverlappedConcentricCirclesStayPut)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius1 = 1_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius2 = 0.6_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape1 = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(radius1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape2 = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(radius2));</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">false</span>;</div><div class="line">    body_def.location = Length2{};</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape1);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape2);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(.01);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc);</div><div class="line">        EXPECT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">        EXPECT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, ListenerCalledForCircleBodyWithinCircleBody)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    MyContactListener listener{</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp;, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a>) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {},</div><div class="line">    };</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.location = Length2{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(1_m));</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 2; ++i)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">        ASSERT_NE(body-&gt;CreateFixture(shape), <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    ASSERT_EQ(listener.begin_contacts, 0u);</div><div class="line">    ASSERT_EQ(listener.end_contacts, 0u);</div><div class="line">    ASSERT_EQ(listener.pre_solves, 0u);</div><div class="line">    ASSERT_EQ(listener.post_solves, 0u);</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s);</div><div class="line"></div><div class="line">    EXPECT_NE(listener.begin_contacts, 0u);</div><div class="line">    EXPECT_EQ(listener.end_contacts, 0u);</div><div class="line">    EXPECT_NE(listener.pre_solves, 0u);</div><div class="line">    EXPECT_NE(listener.post_solves, 0u);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, ListenerCalledForSquareBodyWithinSquareBody)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    MyContactListener listener{</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp;, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a>) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {},</div><div class="line">    };</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.location = Length2{};</div><div class="line">    <span class="keyword">auto</span> conf = <a name="_a140"></a><a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{};</div><div class="line">    conf.<a name="a141"></a><a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#a794190ea846c9740a083a138df49b53f">UseVertexRadius</a>(1_m);</div><div class="line">    conf.<a name="a142"></a><a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#aaccd7ca4c4e1fa493fe4dca42d200d33">SetAsBox</a>(2_m, 2_m);</div><div class="line">    conf.<a name="a143"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2);</div><div class="line">    conf.<a name="a144"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf};</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 2; ++i)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(body, <span class="keyword">nullptr</span>);</div><div class="line">        ASSERT_NE(body-&gt;CreateFixture(shape), <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    </div><div class="line">    ASSERT_EQ(listener.begin_contacts, 0u);</div><div class="line">    ASSERT_EQ(listener.end_contacts, 0u);</div><div class="line">    ASSERT_EQ(listener.pre_solves, 0u);</div><div class="line">    ASSERT_EQ(listener.post_solves, 0u);</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s);</div><div class="line">    </div><div class="line">    EXPECT_NE(listener.begin_contacts, 0u);</div><div class="line">    EXPECT_EQ(listener.end_contacts, 0u);</div><div class="line">    EXPECT_NE(listener.pre_solves, 0u);</div><div class="line">    EXPECT_NE(listener.post_solves, 0u);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, PartiallyOverlappedSameCirclesSeparate)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1);</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">false</span>; <span class="comment">// separation is faster if true.</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(radius * Meter));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1pos = Length2{(-radius/4) * Meter, 0_m};</div><div class="line">    body_def.location = body1pos;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2pos = Length2{(+radius/4) * Meter, 0_m};</div><div class="line">    body_def.location = body2pos;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> position_diff = body2pos - body1pos;</div><div class="line">    <span class="keyword">auto</span> distance = <a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(position_diff);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> angle = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(position_diff);</div><div class="line">    ASSERT_EQ(angle, 0_deg);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> lastpos1 = body1-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> lastpos2 = body2-&gt;GetLocation();</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = .01_s;</div><div class="line">    <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> step;</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(time_inc);</div><div class="line"></div><div class="line">    <span class="comment">// Solver won&#39;t separate more than -step.linearSlop.</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> full_separation = radius * 2_m - <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{step.<a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a>};</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(step);</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_pos_diff = body2-&gt;GetLocation() - body1-&gt;GetLocation();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_distance = <a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(new_pos_diff);</div><div class="line">        </div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{new_distance / Meter}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{full_separation / Meter}) || new_distance &gt; full_separation)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        </div><div class="line">        ASSERT_GE(new_distance, distance);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (new_distance == distance)</div><div class="line">        {</div><div class="line">            <span class="comment">// position resolution has come to tolerance</span></div><div class="line">            ASSERT_GE(new_distance, radius * 2_m - <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{step.<a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a>} * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4});</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="comment">// new_distance &gt; distance</span></div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a name="a145"></a><a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle) != 0)</div><div class="line">            {</div><div class="line">                EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos1));</div><div class="line">                EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos2));</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (<a name="a146"></a><a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle) != 0)</div><div class="line">            {</div><div class="line">                EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos1));</div><div class="line">                EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos2));</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        ASSERT_NE(body1-&gt;GetLocation(), lastpos1);</div><div class="line">        ASSERT_NE(body2-&gt;GetLocation(), lastpos2);</div><div class="line">        </div><div class="line">        lastpos1 = body1-&gt;GetLocation();</div><div class="line">        lastpos2 = body2-&gt;GetLocation();</div><div class="line"></div><div class="line">        ASSERT_NE(new_pos_diff, position_diff);</div><div class="line">        position_diff = new_pos_diff;</div><div class="line"></div><div class="line">        ASSERT_NE(new_distance, distance);</div><div class="line">        distance = new_distance;</div><div class="line"></div><div class="line">        <span class="comment">// angle of the delta of their positions should stay the same as they move away</span></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_angle = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(new_pos_diff);</div><div class="line">        EXPECT_EQ(angle, new_angle);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, PerfectlyOverlappedSameSquaresSeparateHorizontally)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#aaccd7ca4c4e1fa493fe4dca42d200d33">SetAsBox</a>(1_m, 1_m));</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">false</span>;</div><div class="line">    body_def.location = Length2{};</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body1-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body2-&gt;GetLocation(), body_def.location);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> lastpos1 = body1-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> lastpos2 = body2-&gt;GetLocation();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = .01_s;</div><div class="line">    stepConf.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(time_inc);</div><div class="line">    stepConf.<a name="a147"></a><a class="code" href="classplayrho_1_1StepConf.html#a24913ef211ff767753c1eb318e0514da">maxLinearCorrection</a> = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.0001f * 40} * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">        </div><div class="line">        <span class="comment">// body1 moves left only</span></div><div class="line">        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos1));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos1));</div><div class="line"></div><div class="line">        <span class="comment">// body2 moves right only</span></div><div class="line">        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos2));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos2));</div><div class="line">        </div><div class="line">        <span class="comment">// body1 and body2 move away from each other equally.</span></div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body1-&gt;GetLocation()), -<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body2-&gt;GetLocation()));</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body1-&gt;GetLocation()), -<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body2-&gt;GetLocation()));</div><div class="line">        </div><div class="line">        lastpos1 = body1-&gt;GetLocation();</div><div class="line">        lastpos2 = body2-&gt;GetLocation();</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, PartiallyOverlappedSquaresSeparateProperly)</div><div class="line">{</div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * Sets up 2 equally sized squares - body A and body B - where body A is to the right of body B</span></div><div class="line"><span class="comment">     * but they partially overlap. Position solver code should move body A to the right more and</span></div><div class="line"><span class="comment">     * move body B to the left more till they&#39;re almost separated.</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * This tests at a high level what the position solver code does with overlapping shapes.</span></div><div class="line"><span class="comment">     */</span></div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.bullet = <span class="keyword">false</span>; <span class="comment">// separation is faster if true.</span></div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> half_dim = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(64); <span class="comment">// 1 causes additional y-axis separation</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#aaccd7ca4c4e1fa493fe4dca42d200d33">SetAsBox</a>(half_dim * Meter, half_dim * Meter));</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1pos = Length2{<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(half_dim/2) * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m}; <span class="comment">// 0 causes additional y-axis separation</span></div><div class="line">    body_def.location = body1pos;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body1-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body1-&gt;GetLocation(), body1pos);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2pos = Length2{-<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(half_dim/2) * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m}; <span class="comment">// 0 causes additional y-axis separation</span></div><div class="line">    body_def.location = body2pos;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> fixture = body2-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(shape);</div><div class="line">        ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    ASSERT_EQ(body2-&gt;GetLocation(), body2pos);</div><div class="line"></div><div class="line">    ASSERT_EQ(body1-&gt;GetAngle(), 0_deg);</div><div class="line">    ASSERT_EQ(body2-&gt;GetAngle(), 0_deg);</div><div class="line">    <span class="keyword">auto</span> last_angle_1 = body1-&gt;GetAngle();</div><div class="line">    <span class="keyword">auto</span> last_angle_2 = body2-&gt;GetAngle();</div><div class="line"></div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a62acc11c3f6bbeb290493651551687db">GetBodies</a>().size(), World::Bodies::size_type(2));</div><div class="line">    ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), World::Contacts::size_type(0));</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> position_diff = body1pos - body2pos;</div><div class="line">    <span class="keyword">auto</span> distance = <a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(position_diff);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> angle = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(position_diff);</div><div class="line">    EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{angle / 1_rad}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0}));</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> lastpos1 = body1-&gt;GetLocation();</div><div class="line">    <span class="keyword">auto</span> lastpos2 = body2-&gt;GetLocation();</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> velocity_iters = 10u;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> position_iters = 10u;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(.01);</div><div class="line">    <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> step;</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(1_s * time_inc);</div><div class="line">    <span class="comment">// Solver won&#39;t separate more than -step.linearSlop.</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> full_separation = half_dim * 2_m - <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{step.<a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a>};</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; 100; ++i)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc, velocity_iters, position_iters);</div><div class="line">        </div><div class="line">        ASSERT_EQ(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size(), decltype(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size())(1));</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> count = decltype(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size())(0);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; contacts = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>();</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; contact: contacts)</div><div class="line">        {</div><div class="line">            ++count;</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> c = <a class="code" href="namespaceplayrho.html#a7657def9da2229b6a95d1a37008b0258">GetPtr</a>(contact.second);</div><div class="line"></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fa = c-&gt;GetFixtureA();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fb = c-&gt;GetFixtureB();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_a = fa-&gt;GetBody();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_b = fb-&gt;GetBody();</div><div class="line">            EXPECT_EQ(body_a, body1);</div><div class="line">            EXPECT_EQ(body_b, body2);</div><div class="line">            </div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; manifold = c-&gt;GetManifold();</div><div class="line">            EXPECT_EQ(manifold.GetType(), Manifold::e_faceA);</div><div class="line">            EXPECT_EQ(manifold.GetPointCount(), <a class="code" href="classplayrho_1_1d2_1_1Manifold.html#a05c347426e71c41c3b5cff2ff42fa864">Manifold::size_type</a>(2));</div><div class="line">        }</div><div class="line">        ASSERT_EQ(count, decltype(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a599c3903feb0a48673d9dc38758ae2bb">GetContacts</a>().size())(1));</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> v1 = body1-&gt;GetVelocity();</div><div class="line">        EXPECT_EQ(v1.angular, 0_deg / 1_s);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(v1.linear), 0_mps);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(v1.linear), 0_mps);</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> v2 = body2-&gt;GetVelocity();</div><div class="line">        EXPECT_EQ(v2.angular, 0_deg / 1_s);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(v2.linear), 0_mps);</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(v2.linear), 0_mps);</div><div class="line"></div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{body1-&gt;GetAngle() / 1_rad}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{last_angle_1 / 1_rad}));</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{body2-&gt;GetAngle() / 1_rad}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{last_angle_2 / 1_rad}));</div><div class="line">        last_angle_1 = body1-&gt;GetAngle();</div><div class="line">        last_angle_2 = body2-&gt;GetAngle();</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_pos_diff = body1-&gt;GetLocation() - body2-&gt;GetLocation();</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_distance = <a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(new_pos_diff);</div><div class="line">        </div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{new_distance / Meter}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{full_separation / Meter}) || new_distance &gt; full_separation)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="keywordflow">if</span> (new_distance == distance)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle) != 0)</div><div class="line">            {</div><div class="line">                EXPECT_NE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos1));</div><div class="line">                EXPECT_NE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos2));</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle) != 0)</div><div class="line">            {</div><div class="line">                EXPECT_NE(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos1));</div><div class="line">                EXPECT_NE(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos2));</div><div class="line">            }</div><div class="line">            ASSERT_GE(new_distance, 2_m);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        </div><div class="line">        ASSERT_NE(body1-&gt;GetLocation(), lastpos1);</div><div class="line">        ASSERT_NE(body2-&gt;GetLocation(), lastpos2);</div><div class="line">        </div><div class="line">        <span class="comment">// Body 1 moves right only.</span></div><div class="line">        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body1-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos1));</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body1-&gt;GetLocation()) / Meter}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos1) / Meter}));</div><div class="line"></div><div class="line">        <span class="comment">// Body 2 moves left only.</span></div><div class="line">        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body2-&gt;GetLocation()), <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lastpos2));</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body2-&gt;GetLocation()) / Meter}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lastpos2) / Meter}));</div><div class="line"></div><div class="line">        lastpos1 = body1-&gt;GetLocation();</div><div class="line">        lastpos2 = body2-&gt;GetLocation();</div><div class="line">        </div><div class="line">        ASSERT_NE(new_pos_diff, position_diff);</div><div class="line">        position_diff = new_pos_diff;</div><div class="line">        </div><div class="line">        ASSERT_NE(new_distance, distance);</div><div class="line">        distance = new_distance;</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> new_angle = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a93f21ae0c92245d912cb91a99e756946">GetAngle</a>(new_pos_diff);</div><div class="line">        EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{angle / 1_rad}, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{new_angle / 1_rad}));</div><div class="line">        </div><div class="line">        angle = new_angle;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, CollidingDynamicBodies)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius = 1_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> x = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(10); <span class="comment">// other test parameters tuned to this value being 10</span></div><div class="line"></div><div class="line">    <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    </div><div class="line">    MyContactListener listener{</div><div class="line">        [](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;) {},</div><div class="line">        [](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp;, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a>) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {},</div><div class="line">    };</div><div class="line"></div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(radius));</div><div class="line"></div><div class="line">    body_def.location = Length2{-(x + 1) * Meter, 0_m};</div><div class="line">    body_def.linearVelocity = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{+x * 1_mps, 0_mps};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body_a = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(body_a, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body_a-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body_a-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body_a-&gt;IsAccelerable());</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture1 = body_a-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture1, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    body_def.location = Length2{+(x + 1) * Meter, 0_m};</div><div class="line">    body_def.linearVelocity = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{-x * 1_mps, 0_mps};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> body_b = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(body_b, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(body_b-&gt;GetType(), BodyType::Dynamic);</div><div class="line">    ASSERT_TRUE(body_b-&gt;IsSpeedable());</div><div class="line">    ASSERT_TRUE(body_b-&gt;IsAccelerable());</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> fixture2 = body_b-&gt;CreateFixture(shape);</div><div class="line">    ASSERT_NE(fixture2, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), +x * 1_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), 0_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), -x * 1_mps);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), 0_mps);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_collision = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.0099994); <span class="comment">// only valid for x &gt;= around 4.214</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(.01);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> elapsed_time = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">    <span class="keywordflow">for</span> (;;)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc);</div><div class="line">        elapsed_time += time_inc;</div><div class="line">        <span class="keywordflow">if</span> (listener.contacting)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// Call Refilter and SetSensor to add some unit test coverage of these Fixture methods.</span></div><div class="line">    EXPECT_FALSE(body_a-&gt;GetContacts().empty());</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; ci: body_a-&gt;GetContacts())</div><div class="line">    {</div><div class="line">        EXPECT_FALSE(ci.second-&gt;NeedsFiltering());</div><div class="line">        EXPECT_TRUE(ci.second-&gt;NeedsUpdating());</div><div class="line">    }</div><div class="line">    fixture1-&gt;Refilter();</div><div class="line">    EXPECT_FALSE(fixture1-&gt;IsSensor());</div><div class="line">    fixture1-&gt;SetSensor(<span class="keyword">true</span>);</div><div class="line">    EXPECT_TRUE(fixture1-&gt;IsSensor());</div><div class="line">    fixture1-&gt;SetSensor(<span class="keyword">false</span>);</div><div class="line">    EXPECT_FALSE(fixture1-&gt;IsSensor());</div><div class="line">    EXPECT_FALSE(body_a-&gt;GetContacts().empty());</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; ci: body_a-&gt;GetContacts())</div><div class="line">    {</div><div class="line">        EXPECT_TRUE(ci.second-&gt;NeedsFiltering());</div><div class="line">        EXPECT_TRUE(ci.second-&gt;NeedsUpdating());</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_contacting = elapsed_time;</div><div class="line"></div><div class="line">    EXPECT_TRUE(listener.touching);</div><div class="line">    EXPECT_NEAR(<span class="keywordtype">double</span>(time_contacting), <span class="keywordtype">double</span>(time_collision), 0.02);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_a-&gt;GetLocation()), 0_m);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_b-&gt;GetLocation()), 0_m);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> tolerance = x / 100;</div><div class="line">    </div><div class="line">    <span class="comment">// x position for body1 depends on restitution but it should be around -1</span></div><div class="line">    EXPECT_GE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) / Meter, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(-1) - tolerance);</div><div class="line">    EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) / Meter, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(-1) + tolerance);</div><div class="line"></div><div class="line">    <span class="comment">// x position for body2 depends on restitution but it should be around +1</span></div><div class="line">    EXPECT_LE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()) / Meter, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(+1) + tolerance);</div><div class="line">    EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()) / Meter, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(+1) - tolerance);</div><div class="line">    </div><div class="line">    <span class="comment">// and their deltas from -1 and +1 should be about equal.</span></div><div class="line">    EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) + 1_m) / Meter},</div><div class="line">                            <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(1_m - <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation())) / Meter}));</div><div class="line"></div><div class="line">    EXPECT_GE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(listener.body_a[0]), -1_m);</div><div class="line">    EXPECT_LE(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(listener.body_b[0]), +1_m);</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (;;)</div><div class="line">    {</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc);</div><div class="line">        elapsed_time += time_inc;</div><div class="line">        <span class="keywordflow">if</span> (!listener.contacting &amp;&amp; !listener.touching)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    EXPECT_FALSE(listener.touching);</div><div class="line">    </div><div class="line">    EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(elapsed_time, time_contacting + time_inc));</div><div class="line">    </div><div class="line">    <span class="comment">// collision should be fully resolved now...</span></div><div class="line">    EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()), -1_m);</div><div class="line">    EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()), +1_m);</div><div class="line">    </div><div class="line">    <span class="comment">// and their deltas from -1 and +1 should be about equal.</span></div><div class="line">    EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) + 1_m) / Meter},</div><div class="line">                            <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{(1_m - <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation())) / Meter}));</div><div class="line"></div><div class="line">    EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(listener.body_a[1]), -1_m);</div><div class="line">    EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(listener.body_b[1]), +1_m);</div><div class="line">    </div><div class="line">    <span class="comment">// confirm conservation of momentum:</span></div><div class="line">    <span class="comment">// velocities should now be same magnitude but in opposite directions</span></div><div class="line">    EXPECT_NEAR(<span class="keywordtype">double</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)) / 1_mps}),</div><div class="line">                <span class="keywordtype">double</span>(-x), 0.0001);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_a)), 0_mps);</div><div class="line">    EXPECT_NEAR(<span class="keywordtype">double</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)) / 1_mps}),</div><div class="line">                <span class="keywordtype">double</span>(+x), 0.0001);</div><div class="line">    EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_b)), 0_mps);</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, TilesComesToRest)</div><div class="line">{</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> LinearSlop = Meter / 1000;</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> AngularSlop = (<a class="code" href="namespaceplayrho.html#a83e2e155484aefe7098ddf4248bff8ca">Pi</a> * 2 * 1_rad) / 180;</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> VertexRadius = LinearSlop * 2;</div><div class="line">    <span class="keyword">auto</span> conf = <a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#a794190ea846c9740a083a138df49b53f">UseVertexRadius</a>(VertexRadius);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> m_world = std::make_unique&lt;World&gt;(<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(VertexRadius));</div><div class="line">    </div><div class="line">    constexpr <span class="keyword">const</span> <span class="keyword">auto</span> e_count = 36;</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> a = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.5f};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = m_world-&gt;CreateBody(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(Length2{0, -a * Meter}));</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> N = 200;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> M = 10;</div><div class="line">        Length2 position;</div><div class="line">        <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(position) = 0.0_m;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = 0; j &lt; M; ++j)</div><div class="line">        {</div><div class="line">            <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(position) = -N * a * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; N; ++i)</div><div class="line">            {</div><div class="line">                conf.SetAsBox(a * Meter, a * Meter, position, 0_deg);</div><div class="line">                ground-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{conf});</div><div class="line">                <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(position) += 2.0f * a * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line">            }</div><div class="line">            <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(position) -= 2.0f * a * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> a = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{0.5f};</div><div class="line">        conf.UseDensity(5_kgpm2);</div><div class="line">        conf.SetAsBox(a * Meter, a * Meter);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(conf);</div><div class="line">        </div><div class="line">        Length2 x(-7.0_m, 0.75_m);</div><div class="line">        Length2 y;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> deltaX = Length2(0.5625_m, 1.25_m);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> deltaY = Length2(1.125_m, 0.0_m);</div><div class="line">        </div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 0; i &lt; e_count; ++i)</div><div class="line">        {</div><div class="line">            y = x;</div><div class="line">            </div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> j = i; j &lt; e_count; ++j)</div><div class="line">            {</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> body = m_world-&gt;CreateBody(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(y).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ab74e3b01c0f344b7eea842e391567c46">UseLinearAcceleration</a>(EarthlyGravity));</div><div class="line">                body-&gt;CreateFixture(shape);</div><div class="line">                y += deltaY;</div><div class="line">            }</div><div class="line">            </div><div class="line">            x += deltaX;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a> step;</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(1_s / 60);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a> = LinearSlop;</div><div class="line">    step.<a name="a148"></a><a class="code" href="classplayrho_1_1StepConf.html#a7b18d37a3c6cd9b55ea0d17cbda2ec11">regMinSeparation</a> = -LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">    step.<a name="a149"></a><a class="code" href="classplayrho_1_1StepConf.html#a35a04831d008075123c6c211b4ce12f8">toiMinSeparation</a> = -LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.5f);</div><div class="line">    step.<a name="a150"></a><a class="code" href="classplayrho_1_1StepConf.html#a2b76a2f94caee657304bbe29cf2091ec">targetDepth</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">    step.<a name="a151"></a><a class="code" href="classplayrho_1_1StepConf.html#a74a6805a0aa494299d5dc1ef6f7666db">tolerance</a> = LinearSlop / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a24913ef211ff767753c1eb318e0514da">maxLinearCorrection</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(40);</div><div class="line">    step.<a name="a152"></a><a class="code" href="classplayrho_1_1StepConf.html#a5eb64a27f2fb8884d6dd4565ed691f66">maxAngularCorrection</a> = AngularSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4};</div><div class="line">    step.<a name="a153"></a><a class="code" href="classplayrho_1_1StepConf.html#a2843eaacd8bc5a99f9764d734deb5399">aabbExtension</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(20);</div><div class="line">    step.<a name="a154"></a><a class="code" href="classplayrho_1_1StepConf.html#ac3d3dd18627b28b89a94eb32bb0763f7">maxTranslation</a> = <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a>{Meter * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4)};</div><div class="line">    step.<a name="a155"></a><a class="code" href="classplayrho_1_1StepConf.html#a1df1b4fee721cf88f35fc08879027033">velocityThreshold</a> = (<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{8} / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{10}) * 1_mps;</div><div class="line">    step.<a name="a156"></a><a class="code" href="classplayrho_1_1StepConf.html#aa3a018f1176d9ab03b89d15090bdda7e">maxSubSteps</a> = std::uint8_t{48};</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> numSteps = 0ul;</div><div class="line">    <span class="keyword">auto</span> sumRegPosIters = 0ul;</div><div class="line">    <span class="keyword">auto</span> sumRegVelIters = 0ul;</div><div class="line">    <span class="keyword">auto</span> sumToiPosIters = 0ul;</div><div class="line">    <span class="keyword">auto</span> sumToiVelIters = 0ul;</div><div class="line">    <span class="comment">//const auto start_time = std::chrono::high_resolution_clock::now();</span></div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(*m_world) &gt; 0)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> stats = m_world-&gt;Step(step);</div><div class="line">        sumRegPosIters += stats.reg.sumPosIters;</div><div class="line">        sumRegVelIters += stats.reg.sumVelIters;</div><div class="line">        sumToiPosIters += stats.toi.sumPosIters;</div><div class="line">        sumToiVelIters += stats.toi.sumVelIters;</div><div class="line">        ++numSteps;</div><div class="line">    }</div><div class="line">    <span class="comment">//const auto end_time = std::chrono::high_resolution_clock::now();</span></div><div class="line">    </div><div class="line">    <span class="comment">//const std::chrono::duration&lt;double&gt; elapsed_time = end_time - start_time;</span></div><div class="line">    </div><div class="line">    <span class="comment">// seeing e_count=20 times around:</span></div><div class="line">    <span class="comment">//   0.447077s with Real=float and NDEBUG defined.</span></div><div class="line">    <span class="comment">//   6.45222s with Real=float and NDEBUG not defined.</span></div><div class="line">    <span class="comment">//   0.456306s with Real=double and NDEBUG defined.</span></div><div class="line">    <span class="comment">//   6.74324s with Real=double and NDEBUG not defined.</span></div><div class="line">    </div><div class="line">    <span class="comment">// seeing e_count=24 times around:</span></div><div class="line">    <span class="comment">//   0.956078s with Real=float and NDEBUG defined.</span></div><div class="line">    <span class="comment">//   0.989387s with Real=double and NDEBUG defined.</span></div><div class="line">    </div><div class="line">    <span class="comment">// seeing e_count=30 times around:</span></div><div class="line">    <span class="comment">//   2.35464s with Real=float and NDEBUG defined.</span></div><div class="line">    <span class="comment">//   2.51661s with Real=double and NDEBUG defined.</span></div><div class="line">    </div><div class="line">    <span class="comment">// seeing e_count=36 times around:</span></div><div class="line">    <span class="comment">//   4.85618s with Real=float and NDEBUG defined.</span></div><div class="line">    <span class="comment">//   5.32973s with Real=double and NDEBUG defined.</span></div><div class="line">    </div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1World.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(*m_world), 0u);</div><div class="line"></div><div class="line">    <span class="comment">// The final stats seem dependent on the host the test is run on.</span></div><div class="line">    <span class="comment">// Presume that this is most closely associated with the actual CPU/FPU.</span></div><div class="line"></div><div class="line">    <span class="comment">// Note about commit 6b16f3722d5daac80ebaefd1dfda424939498dd4:</span></div><div class="line">    <span class="comment">//   Changed the order in which bodies get added to the world body list</span></div><div class="line">    <span class="comment">//   from being added to the front of the list to being added to the back</span></div><div class="line">    <span class="comment">//   of the list. Adding bodies to the front of World::m_bodies list</span></div><div class="line">    <span class="comment">//   resulted in the world index of bodies changing as new bodies got added.</span></div><div class="line">    <span class="comment">//   This wasn&#39;t the desired behavior. Time trials of this test with bodies</span></div><div class="line">    <span class="comment">//   being added to the back of the m_bodies list also got faster than</span></div><div class="line">    <span class="comment">//   when bodies were getting added to the front of the list.</span></div><div class="line">    </div><div class="line">    <span class="comment">// Note about commit 04f9188c47961cafe76c55eb6b766a608593ee08:</span></div><div class="line">    <span class="comment">//   Changed the way velocity constraint resolution was done. Added a check</span></div><div class="line">    <span class="comment">//   to see if any changes to velocity were introduced. If not, new code</span></div><div class="line">    <span class="comment">//   does an early exit from its velocityIterations looping.</span></div><div class="line">    </div><div class="line">    <span class="comment">// Note about commit d361c51d6aca13079e9d44b701715e62cec18a63:</span></div><div class="line">    <span class="comment">//   Changes were introduced that modified the way manifold calculations are done.</span></div><div class="line">    <span class="comment">//   While many of the following counts appear to have increased, this new</span></div><div class="line">    <span class="comment">//   mechanism for manifold calculations has benefits like no longer needing</span></div><div class="line">    <span class="comment">//   &quot;ghost-vertices&quot; to avoid sticking of things like boxes being dragged across</span></div><div class="line">    <span class="comment">//   a floor made up of chained edges nor rectangles. As to why the new manifold</span></div><div class="line">    <span class="comment">//   calculating method makes the counts change, that&#39;s not clear to me since</span></div><div class="line">    <span class="comment">//   it doesn&#39;t seem that the changes to the manifold calculation would be seen in</span></div><div class="line">    <span class="comment">//   this test. That some of these counts actually became lower (in the Core-2 case)</span></div><div class="line">    <span class="comment">//   suggests that the change to these counts has more to do with differences in</span></div><div class="line">    <span class="comment">//   floating point hardware than in the modifications actually adversely impacting</span></div><div class="line">    <span class="comment">//   the algorithmic efficiency of the code.</span></div><div class="line">    <span class="comment">//</span></div><div class="line"><span class="preprocessor">#if defined(__core2__)</span></div><div class="line">    <span class="keywordflow">switch</span> (<span class="keyword">sizeof</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span>  4:</div><div class="line">        {</div><div class="line"><span class="preprocessor">#ifndef __FAST_MATH__</span></div><div class="line">            EXPECT_EQ(numSteps, 1796ul);</div><div class="line">            EXPECT_EQ(sumRegPosIters, 36503ul);</div><div class="line">            EXPECT_EQ(sumRegVelIters, 46923ul);</div><div class="line">            EXPECT_EQ(sumToiPosIters, 43913ul);</div><div class="line">            EXPECT_EQ(sumToiVelIters, 113000ul);</div><div class="line"></div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1912ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36657ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 47843ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 43931ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 113034ul);</span></div><div class="line"></div><div class="line">            <span class="comment">// From commit ee74290c17422ccbd6a73f07d6fd9abe960da84a onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1802ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36524ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 46981ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 44084ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114366ul);</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line">            <span class="comment">// From commit ee74290c17422ccbd6a73f07d6fd9abe960da84a onward:</span></div><div class="line">            EXPECT_EQ(numSteps, 1003ul);</div><div class="line">            EXPECT_EQ(sumRegPosIters, 52909ul);</div><div class="line">            EXPECT_EQ(sumRegVelIters, 103896ul);</div><div class="line">            EXPECT_EQ(sumToiPosIters, 20616ul);</div><div class="line">            EXPECT_EQ(sumToiVelIters, 30175ul);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit 6b16f3722d5daac80ebaefd1dfda424939498dd4 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1801ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36523ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 46973ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 44044ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114344ul);</span></div><div class="line"></div><div class="line">            <span class="comment">// From commit 04f9188c47961cafe76c55eb6b766a608593ee08 onward.</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1856ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36720ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 47656ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 44263ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 112833ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit d361c51d6aca13079e9d44b701715e62cec18a63 onward.</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1856ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36720ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 264376ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 44263ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 145488ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// Pre commit d361c51d6aca13079e9d44b701715e62cec18a63</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1814ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36600ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 264096ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 45022ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 148560ul);</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span>  8:</div><div class="line">        {</div><div class="line">            EXPECT_EQ(numSteps,         1828ul);</div><div class="line">            EXPECT_EQ(sumRegPosIters,  36540ul);</div><div class="line">            EXPECT_EQ(sumRegVelIters,  47173ul);</div><div class="line">            EXPECT_EQ(sumToiPosIters,  44005ul);</div><div class="line">            EXPECT_EQ(sumToiVelIters, 114427ul);</div><div class="line"></div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1828ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36540ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  47173ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  44005ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114490ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit 6b16f3722d5daac80ebaefd1dfda424939498dd4 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1807ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36584ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  47380ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  44552ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 115392ul);</span></div><div class="line"></div><div class="line">            <span class="comment">// From commit 04f9188c47961cafe76c55eb6b766a608593ee08 onward.</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1808ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36684ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 48087ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 45116ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 118984ul);</span></div><div class="line"></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1808ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36684ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 264856ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 45116ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 149392ul);</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span> 16:</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">        {</div><div class="line">            FAIL(); <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"><span class="preprocessor">#elif defined(__k8__)</span></div><div class="line">    <span class="keywordflow">switch</span> (<span class="keyword">sizeof</span>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span>  4:</div><div class="line">        {</div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            EXPECT_EQ(numSteps,         1768ul);</div><div class="line">            EXPECT_EQ(sumRegPosIters,  36419ul);</div><div class="line">            EXPECT_EQ(sumRegVelIters,  46684ul);</div><div class="line">            EXPECT_EQ(sumToiPosIters,  43814ul);</div><div class="line">            EXPECT_EQ(sumToiVelIters, 113452ul);</div><div class="line"></div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1799ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36515ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  46964ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  43999ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 113153ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit ee74290c17422ccbd6a73f07d6fd9abe960da84a onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1803ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36673ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  48148ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  43959ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 113189ul);</span></div><div class="line"></div><div class="line">            <span class="comment">// From commit 6b16f3722d5daac80ebaefd1dfda424939498dd4 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1803ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36528ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  46988ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  44178ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114936ul);</span></div><div class="line"></div><div class="line">            <span class="comment">// From commit 04f9188c47961cafe76c55eb6b766a608593ee08 onward.</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1855ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36737ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 47759ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 44698ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114840ul);</span></div><div class="line"></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">case</span>  8:</div><div class="line">        {</div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            EXPECT_EQ(numSteps,         1828ul);</div><div class="line">            EXPECT_EQ(sumRegPosIters,  36540ul);</div><div class="line">            EXPECT_EQ(sumRegVelIters,  47173ul);</div><div class="line">            EXPECT_EQ(sumToiPosIters,  44005ul);</div><div class="line">            EXPECT_EQ(sumToiVelIters, 114462ul);</div><div class="line"></div><div class="line">            <span class="comment">// From commit 0b049bd28d1bbb01d1750ec1fc9498105f13d192 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1828ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36540ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  47173ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  44005ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 114259ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit 6b16f3722d5daac80ebaefd1dfda424939498dd4 onward:</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps,         1807ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters,  36584ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters,  47380ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters,  44552ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 115406ul);</span></div><div class="line">            </div><div class="line">            <span class="comment">// From commit 04f9188c47961cafe76c55eb6b766a608593ee08 onward.</span></div><div class="line">            <span class="comment">//EXPECT_EQ(numSteps, 1808ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegPosIters, 36684ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumRegVelIters, 48087ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiPosIters, 45116ul);</span></div><div class="line">            <span class="comment">//EXPECT_EQ(sumToiVelIters, 118830ul);</span></div><div class="line"></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// From commit d361c51d6aca13079e9d44b701715e62cec18a63 onward.</span></div><div class="line">    <span class="comment">//EXPECT_EQ(numSteps, 1855ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumRegPosIters, 36737ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumRegVelIters, 264528ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumToiPosIters, 44698ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumToiVelIters, 147544ul);</span></div><div class="line">    </div><div class="line">    <span class="comment">// Pre commit d361c51d6aca13079e9d44b701715e62cec18a63</span></div><div class="line">    <span class="comment">//EXPECT_EQ(numSteps, 1822ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumRegPosIters, 36616ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumRegVelIters, 264096ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumToiPosIters, 44415ul);</span></div><div class="line">    <span class="comment">//EXPECT_EQ(sumToiVelIters, 146800ul);</span></div><div class="line"><span class="preprocessor">#elif defined(_WIN64) // This is likely wrong as the results are more likely arch dependent</span></div><div class="line">    EXPECT_EQ(numSteps, 1800ul);</div><div class="line">    EXPECT_EQ(sumRegPosIters, 36516ul);</div><div class="line">    EXPECT_EQ(sumRegVelIters, 46948ul);</div><div class="line">    EXPECT_EQ(sumToiPosIters, 43970ul);</div><div class="line">    EXPECT_EQ(sumToiVelIters, 112904ul);</div><div class="line"><span class="preprocessor">#elif defined(_WIN32)</span></div><div class="line">    EXPECT_EQ(numSteps, 1793ul);</div><div class="line">    EXPECT_EQ(sumRegPosIters, 36495ul);</div><div class="line">    EXPECT_EQ(sumRegVelIters, 46884ul);</div><div class="line">    EXPECT_EQ(sumToiPosIters, 43982ul);</div><div class="line">    EXPECT_EQ(sumToiVelIters, 112969ul);</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    <span class="comment">// These will likely fail and need to be tweaked for the particular hardware...</span></div><div class="line">    EXPECT_EQ(numSteps, 1814ul);</div><div class="line">    EXPECT_EQ(sumRegPosIters, 36600ul);</div><div class="line">    EXPECT_EQ(sumRegVelIters, 264096ul);</div><div class="line">    EXPECT_EQ(sumToiPosIters, 45022ul);</div><div class="line">    EXPECT_EQ(sumToiVelIters, 148560ul);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    </div><div class="line">    <span class="comment">//std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; elapsed_time.count() &lt;&lt; &quot;s&quot; &lt;&lt; std::endl;</span></div><div class="line">    <span class="comment">// EXPECT_LT(elapsed_time.count(), 7.0);</span></div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SpeedingBulletBallWontTunnel)</div><div class="line">{</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> LinearSlop = <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">playrho::Meter</a> / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">playrho::Real</a>(1000);</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> AngularSlop = (<a class="code" href="namespaceplayrho.html#a83e2e155484aefe7098ddf4248bff8ca">Pi</a> * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2} * 1_rad) / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{180};</div><div class="line">    PLAYRHO_CONSTEXPR <span class="keyword">const</span> <span class="keyword">auto</span> VertexRadius = <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">playrho::Length</a>{LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">playrho::Real</a>(2)};</div><div class="line">    </div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html#a8940712fdf40b4e07c6d30723f708323">UseMinVertexRadius</a>(VertexRadius)};</div><div class="line"></div><div class="line">    MyContactListener listener{</div><div class="line">        [](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;) {},</div><div class="line">        [](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp;, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a>) {},</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {},</div><div class="line">    };</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line"></div><div class="line">    ASSERT_EQ(listener.begin_contacts, <span class="keywordtype">unsigned</span>{0});</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> left_edge_x = -0.1_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> right_edge_x = +0.1_m;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> edgeConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}</div><div class="line">        .<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a0fa0648764ab95db5771e0bb4c4aba12">UseVertexRadius</a>(VertexRadius)</div><div class="line">        .<a name="a157"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1))</div><div class="line">        .<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(Length2{0_m, +10_m}, Length2{0_m, -10_m});</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> edge_shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(edgeConf);</div><div class="line"></div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> body_def;</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Static;</div><div class="line"></div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{left_edge_x, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> left_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(left_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = left_wall_body-&gt;CreateFixture(edge_shape);</div><div class="line">        ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{right_edge_x, 0_m};</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> right_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(right_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = right_wall_body-&gt;CreateFixture(edge_shape);</div><div class="line">        ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> begin_x = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line"></div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{begin_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m};</div><div class="line">    body_def.<a name="a158"></a><a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a635dab49119a08c2ddbe1c082c502e29">bullet</a> = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ball_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(ball_body, <span class="keyword">nullptr</span>);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ball_radius = 0.01_m;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> circle_shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1)).<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(ball_radius));</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ball_fixture = ball_body-&gt;CreateFixture(circle_shape);</div><div class="line">    ASSERT_NE(ball_fixture, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> velocity = <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{+1_mps, 0_mps};</div><div class="line">    ball_body-&gt;SetVelocity(<a name="_a159"></a><a class="code" href="structplayrho_1_1d2_1_1Velocity.html">Velocity</a>{velocity, 0_deg / 1_s});</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = .01_s;</div><div class="line">    <span class="keyword">auto</span> step = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{};</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(time_inc);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a0a8774f5c57ec70ec8b1ca0ad7073e4d">linearSlop</a> = LinearSlop;</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a7b18d37a3c6cd9b55ea0d17cbda2ec11">regMinSeparation</a> = -LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a35a04831d008075123c6c211b4ce12f8">toiMinSeparation</a> = -LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.5f);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2b76a2f94caee657304bbe29cf2091ec">targetDepth</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(3);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a74a6805a0aa494299d5dc1ef6f7666db">tolerance</a> = LinearSlop / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(4);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a24913ef211ff767753c1eb318e0514da">maxLinearCorrection</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(40);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a5eb64a27f2fb8884d6dd4565ed691f66">maxAngularCorrection</a> = AngularSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4};</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a2843eaacd8bc5a99f9764d734deb5399">aabbExtension</a> = LinearSlop * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(20);</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#a1df1b4fee721cf88f35fc08879027033">velocityThreshold</a> = (<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{8} / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{10}) * 1_mps;</div><div class="line">    step.<a class="code" href="classplayrho_1_1StepConf.html#aa3a018f1176d9ab03b89d15090bdda7e">maxSubSteps</a> = std::uint8_t{48};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(step);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> max_velocity = step.<a class="code" href="classplayrho_1_1StepConf.html#ac3d3dd18627b28b89a94eb32bb0763f7">maxTranslation</a> / time_inc;</div><div class="line"></div><div class="line">    ASSERT_EQ(listener.begin_contacts, <span class="keywordtype">unsigned</span>{0});</div><div class="line"></div><div class="line">    EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) / Meter, begin_x);</div><div class="line"></div><div class="line">    EXPECT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*ball_body), velocity);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> max_travel = <span class="keywordtype">unsigned</span>{10000};</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> increments = <span class="keywordtype">int</span>{1};</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> laps = <span class="keywordtype">int</span>{1}; laps &lt; 100; ++laps)</div><div class="line">    {</div><div class="line">        <span class="comment">// traveling to the right</span></div><div class="line">        listener.begin_contacts = 0;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> travel_r = <span class="keywordtype">unsigned</span>{0}; ; ++travel_r)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (travel_r == max_travel)</div><div class="line">            {</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;begin_contacts=&quot;</span> &lt;&lt; listener.begin_contacts &lt;&lt; std::endl;</div><div class="line">                ASSERT_LT(travel_r, max_travel);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> last_contact_count = listener.begin_contacts;</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(step);</div><div class="line"></div><div class="line">            EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), right_edge_x - (ball_radius/<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}));</div><div class="line">            EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), left_edge_x + (ball_radius/<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}));</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear) &gt;= max_velocity)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (listener.begin_contacts % 2 != 0) <span class="comment">// direction switched</span></div><div class="line">            {</div><div class="line">                EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear), 0_mps);</div><div class="line">                <span class="keywordflow">break</span>; <span class="comment">// going left now</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (listener.begin_contacts &gt; last_contact_count)</div><div class="line">            {</div><div class="line">                ++increments;</div><div class="line">                ball_body-&gt;SetVelocity(<a class="code" href="structplayrho_1_1d2_1_1Velocity.html">Velocity</a>{</div><div class="line">                    <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{</div><div class="line">                        <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a><span class="keyword">&gt;</span>(increments) * <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(velocity),</div><div class="line">                        <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetVelocity().linear)</div><div class="line">                    }, ball_body-&gt;GetVelocity().angular});</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear) / 1_mps},</div><div class="line">                                        <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<span class="keyword">static_cast&lt;</span><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a><span class="keyword">&gt;</span>(increments) * <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(velocity) / 1_mps}));</div><div class="line">            }</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="comment">// traveling to the left</span></div><div class="line">        listener.begin_contacts = 0;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> travel_l = <span class="keywordtype">unsigned</span>{0}; ; ++travel_l)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (travel_l == max_travel)</div><div class="line">            {</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;begin_contacts=&quot;</span> &lt;&lt; listener.begin_contacts &lt;&lt; std::endl;</div><div class="line">                ASSERT_LT(travel_l, max_travel);</div><div class="line">            }</div><div class="line">            </div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> last_contact_count = listener.begin_contacts;</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(step);</div><div class="line">            </div><div class="line">            EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), right_edge_x - (ball_radius/<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}));</div><div class="line">            EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), left_edge_x + (ball_radius/<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}));</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear) &lt;= -max_velocity)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (listener.begin_contacts % 2 != 0) <span class="comment">// direction switched</span></div><div class="line">            {</div><div class="line">                EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear), 0_mps);</div><div class="line">                <span class="keywordflow">break</span>; <span class="comment">// going right now</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (listener.begin_contacts &gt; last_contact_count)</div><div class="line">            {</div><div class="line">                ++increments;</div><div class="line">                ball_body-&gt;SetVelocity(<a class="code" href="structplayrho_1_1d2_1_1Velocity.html">Velocity</a>{</div><div class="line">                    <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{</div><div class="line">                        -<span class="keyword">static_cast&lt;</span><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a><span class="keyword">&gt;</span>(increments) * <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(velocity),</div><div class="line">                        <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetVelocity().linear)</div><div class="line">                    }, ball_body-&gt;GetVelocity().angular});</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetVelocity().linear) / 1_mps},</div><div class="line">                                        <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{-<span class="keyword">static_cast&lt;</span><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a><span class="keyword">&gt;</span>(increments) * <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(velocity) / 1_mps}));</div><div class="line">            }</div><div class="line">        }</div><div class="line">        </div><div class="line">        ++increments;</div><div class="line">        ball_body-&gt;SetVelocity(<a class="code" href="structplayrho_1_1d2_1_1Velocity.html">Velocity</a>{</div><div class="line">            <a class="code" href="structplayrho_1_1Vector.html">LinearVelocity2</a>{</div><div class="line">                <span class="keyword">static_cast&lt;</span><a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a><span class="keyword">&gt;</span>(increments) * <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(velocity),</div><div class="line">                <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetVelocity().linear)</div><div class="line">            }, ball_body-&gt;GetVelocity().angular});</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, TargetJointWontCauseTunnelling)</div><div class="line">{</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> half_box_width = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> left_edge_x = -half_box_width;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> right_edge_x = +half_box_width;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> half_box_height = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.2);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> btm_edge_y = -half_box_height;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> top_edge_y = +half_box_height;</div><div class="line"></div><div class="line">    <a class="code" href="structplayrho_1_1detail_1_1AABB.html">AABB</a> container_aabb;</div><div class="line"></div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> body_def;</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Static;</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> edgeConf = <a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{};</div><div class="line">    edgeConf.<a name="a160"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a973f6781e63cb44363bf2a720f811855">UseFriction</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.4f));</div><div class="line">    edgeConf.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#acf9c2136c7a5242413b58757df80bf6c">UseRestitution</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.94f)); <span class="comment">// changes where bodies will be after collision</span></div><div class="line">    </div><div class="line">    <span class="comment">// Setup vertical bounderies</span></div><div class="line">    edgeConf.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(Length2{0, +half_box_height * 2_m}, Length2{0, -half_box_height * 2_m});</div><div class="line"></div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{left_edge_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m};</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> left_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(left_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = left_wall_body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(edgeConf));</div><div class="line">            ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">        }</div><div class="line">        <a name="a161"></a><a class="code" href="structplayrho_1_1detail_1_1AABB.html#a4ab5887876bf8379833a7ddc5901a207">Include</a>(container_aabb, <a name="a162"></a><a class="code" href="classplayrho_1_1d2_1_1DistanceProxy.html#a44cc65808fd89570707b3af1bc87eb36">ComputeAABB</a>(*left_wall_body));</div><div class="line">    }</div><div class="line">    </div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{right_edge_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, 0_m};</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> right_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(right_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = right_wall_body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(edgeConf));</div><div class="line">            ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">        }</div><div class="line">        <a class="code" href="structplayrho_1_1detail_1_1AABB.html#a4ab5887876bf8379833a7ddc5901a207">Include</a>(container_aabb, <a class="code" href="classplayrho_1_1d2_1_1DistanceProxy.html#a44cc65808fd89570707b3af1bc87eb36">ComputeAABB</a>(*right_wall_body));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Setup horizontal bounderies</span></div><div class="line">    edgeConf.Set(Length2{-half_box_width * 2_m, 0_m}, Length2{+half_box_width * 2_m, 0_m});</div><div class="line">    </div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{0, btm_edge_y * Meter};</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> btm_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(btm_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = btm_wall_body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(edgeConf));</div><div class="line">            ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">        }</div><div class="line">        <a class="code" href="structplayrho_1_1detail_1_1AABB.html#a4ab5887876bf8379833a7ddc5901a207">Include</a>(container_aabb, <a class="code" href="classplayrho_1_1d2_1_1DistanceProxy.html#a44cc65808fd89570707b3af1bc87eb36">ComputeAABB</a>(*btm_wall_body));</div><div class="line">    }</div><div class="line">    </div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{0, top_edge_y * Meter};</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> top_wall_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(top_wall_body, <span class="keyword">nullptr</span>);</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> wall_fixture = top_wall_body-&gt;CreateFixture(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(edgeConf));</div><div class="line">            ASSERT_NE(wall_fixture, <span class="keyword">nullptr</span>);</div><div class="line">        }</div><div class="line">        <a class="code" href="structplayrho_1_1detail_1_1AABB.html#a4ab5887876bf8379833a7ddc5901a207">Include</a>(container_aabb, <a class="code" href="classplayrho_1_1d2_1_1DistanceProxy.html#a44cc65808fd89570707b3af1bc87eb36">ComputeAABB</a>(*top_wall_body));</div><div class="line">    }</div><div class="line"></div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{};</div><div class="line">    body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a635dab49119a08c2ddbe1c082c502e29">bullet</a> = <span class="keyword">true</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ball_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">    ASSERT_NE(ball_body, <span class="keyword">nullptr</span>);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), 0_m);</div><div class="line">    ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()), 0_m);</div><div class="line">    </div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> ball_radius = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(half_box_width / 4) * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> object_shape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>(<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(10_kgpm2).<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#aaccd7ca4c4e1fa493fe4dca42d200d33">SetAsBox</a>(ball_radius, ball_radius));</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ball_fixture = ball_body-&gt;CreateFixture(object_shape);</div><div class="line">        ASSERT_NE(ball_fixture, <span class="keyword">nullptr</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    constexpr <span class="keyword">const</span> <span class="keywordtype">unsigned</span> numBodies = 1;</div><div class="line">    Length2 last_opos[numBodies];</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1Body.html">Body</a> *bodies[numBodies];</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(numBodies){0}; i &lt; numBodies; ++i)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> angle = i * 2 * <a class="code" href="namespaceplayrho.html#a83e2e155484aefe7098ddf4248bff8ca">Pi</a> / numBodies;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> x = ball_radius * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(2.1) * <a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle);</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> y = ball_radius * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(2.1) * <a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle);</div><div class="line">        body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a96d0adc085fd3d0f0f9d37896c463e7a">location</a> = Length2{x, y};</div><div class="line">        bodies[i] = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_NE(bodies[i], <span class="keyword">nullptr</span>);</div><div class="line">        ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(bodies[i]-&gt;<a name="a163"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), x);</div><div class="line">        ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), y);</div><div class="line">        last_opos[i] = bodies[i]-&gt;<a name="a164"></a><a class="code" href="classplayrho_1_1d2_1_1Body.html#a63db5146e976e495518b850c37be060d">GetLocation</a>();</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fixture = bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(object_shape);</div><div class="line">            ASSERT_NE(fixture, <span class="keyword">nullptr</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a> bodyConf;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> spare_body = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(bodyConf);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> target_joint = [&amp;]() {</div><div class="line">        <a class="code" href="structplayrho_1_1d2_1_1TargetJointConf.html">TargetJointConf</a> mjd;</div><div class="line">        mjd.<a name="a165"></a><a class="code" href="structplayrho_1_1d2_1_1JointConf.html#ab0491a1c54557c72697f7f5b5efe00e0">bodyA</a> = spare_body;</div><div class="line">        mjd.<a name="a166"></a><a class="code" href="structplayrho_1_1d2_1_1JointConf.html#afa2f841c8d2b694ddfe7278576fd352a">bodyB</a> = ball_body;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ball_body_pos = ball_body-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a63db5146e976e495518b850c37be060d">GetLocation</a>();</div><div class="line">        mjd.<a name="a167"></a><a class="code" href="structplayrho_1_1d2_1_1TargetJointConf.html#aa959f11ea9a7a0bb34f26bddd23ac279">target</a> = Length2{</div><div class="line">            <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body_pos) - ball_radius / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2},</div><div class="line">            <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body_pos) + ball_radius / <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{2}</div><div class="line">        };</div><div class="line">        mjd.<a name="a168"></a><a class="code" href="structplayrho_1_1d2_1_1TargetJointConf.html#a749a955e6dc7a4e5a7ded98234247e54">maxForce</a> = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1000) * <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3c355eb58981b97e5901fa7d04052507">GetMass</a>(*ball_body) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>;</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a name="_a169"></a><a class="code" href="classplayrho_1_1d2_1_1TargetJoint.html">TargetJoint</a>*<span class="keyword">&gt;</span>(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8b2dbd2e42ecedf2d877875c62a9a2a4">CreateJoint</a>(mjd));</div><div class="line">    }();</div><div class="line">    ASSERT_NE(target_joint, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">    ball_body-&gt;SetAwake();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> max_x = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">    <span class="keyword">auto</span> min_x = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">    <span class="keyword">auto</span> max_y = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">    <span class="keyword">auto</span> min_y = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> max_velocity = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line"></div><div class="line">    <span class="comment">//const auto time_inc = Real(.0043268126901); // numBodies = 6, somewhat dependent on fixture density (10 or less?).</span></div><div class="line">    <span class="comment">//const auto time_inc = Real(.0039224); // numBodies = 4, maybe dependent on fixture density</span></div><div class="line">    <span class="comment">//const auto time_inc = Real(.003746); // numBodies = 2, maybe dependent on fixture density</span></div><div class="line">    <span class="comment">//const auto time_inc = Real(.0036728129); // numBodies = 1, maybe dependent on fixture density</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> time_inc = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(.00367281295); <span class="comment">// numBodies = 1, maybe dependent on fixture density</span></div><div class="line"></div><div class="line">    <span class="keyword">auto</span> angle = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">    <span class="keyword">auto</span> anglular_speed = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.01); <span class="comment">// radians / timestep</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> anglular_accel = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.002);</div><div class="line">    <span class="keyword">auto</span> distance = half_box_width / 2;</div><div class="line">    <span class="keyword">auto</span> distance_speed = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.003); <span class="comment">// meters / timestep</span></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> distance_accel = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1.001);</div><div class="line"></div><div class="line">    MyContactListener listener{</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp; old_manifold)</div><div class="line">        {</div><div class="line">            <span class="comment">// PreSolve...</span></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> new_manifold = contact.<a name="a170"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#af1e31fc73fe150e3b5f7bb4d3055d076">GetManifold</a>();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> pointStates = <a class="code" href="namespaceplayrho_1_1d2.html#ae48de2e5ef109c667912e5db7b170d94">GetPointStates</a>(old_manifold, new_manifold);</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> oldPointCount = old_manifold.GetPointCount();</div><div class="line">            <span class="keywordflow">switch</span> (oldPointCount)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">case</span> 0:</div><div class="line">                    ASSERT_EQ(pointStates.state1[0], PointState::NullState);</div><div class="line">                    ASSERT_EQ(pointStates.state1[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> 1:</div><div class="line">                    ASSERT_NE(pointStates.state1[0], PointState::NullState);</div><div class="line">                    ASSERT_EQ(pointStates.state1[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> 2:</div><div class="line">                    ASSERT_NE(pointStates.state1[0], PointState::NullState);</div><div class="line">                    ASSERT_NE(pointStates.state1[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                    ASSERT_LE(oldPointCount, 2);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> newPointCount = new_manifold.GetPointCount();</div><div class="line">            <span class="keywordflow">switch</span> (newPointCount)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">case</span> 0:</div><div class="line">                    ASSERT_EQ(pointStates.state2[0], PointState::NullState);</div><div class="line">                    ASSERT_EQ(pointStates.state2[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> 1:</div><div class="line">                    ASSERT_NE(pointStates.state2[0], PointState::NullState);</div><div class="line">                    ASSERT_EQ(pointStates.state2[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">case</span> 2:</div><div class="line">                    ASSERT_NE(pointStates.state2[0], PointState::NullState);</div><div class="line">                    ASSERT_NE(pointStates.state2[1], PointState::NullState);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                    ASSERT_LE(newPointCount, 2);</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">            ASSERT_THROW(world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a8fce75bd4075681b56a758ccb9d950ba">Destroy</a>(target_joint), <a class="code" href="classplayrho_1_1WrongState.html">WrongState</a>);</div><div class="line">        },</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp; impulse, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a> solved)</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fA = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#acf266ef338a99dc9f63837c375706fe4">GetFixtureA</a>();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fB = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a461a1dea95676477646a0058a5afb0d3">GetFixtureB</a>();</div><div class="line"></div><div class="line">            ASSERT_NE(fA, <span class="keyword">nullptr</span>);</div><div class="line">            ASSERT_NE(fB, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_a = fA-&gt;GetBody();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_b = fB-&gt;GetBody();</div><div class="line"></div><div class="line">            ASSERT_NE(body_a, <span class="keyword">nullptr</span>);</div><div class="line">            ASSERT_NE(body_b, <span class="keyword">nullptr</span>);</div><div class="line"></div><div class="line">            <span class="keyword">auto</span> fail_count = <span class="keywordtype">unsigned</span>{0};</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; body: {body_a, body_b})</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (!body-&gt;IsSpeedable())</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">continue</span>;</div><div class="line">                }</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> bpos = body-&gt;GetLocation();</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> lt = Length2{right_edge_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, top_edge_y * Meter} - bpos;</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> gt = bpos - Length2{left_edge_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, btm_edge_y * Meter};</div><div class="line">                </div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(lt) &lt;= 0_m || <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(lt) &lt;= 0_m || <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(gt) &lt;= 0_m || <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(gt) &lt;= 0_m)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (!<a name="a171"></a><a class="code" href="structplayrho_1_1detail_1_1AABB.html#a5accaf2fe5186e02ddb93f8c07887c54">TestOverlap</a>(container_aabb, <a class="code" href="classplayrho_1_1d2_1_1DistanceProxy.html#a44cc65808fd89570707b3af1bc87eb36">ComputeAABB</a>(*body)))</div><div class="line">                    {</div><div class="line">                        <span class="comment">// Body out of bounds and no longer even overlapping container!</span></div><div class="line">                        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), right_edge_x * Meter);</div><div class="line">                        EXPECT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), top_edge_y * Meter);</div><div class="line">                        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()), left_edge_x * Meter);</div><div class="line">                        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()), btm_edge_y * Meter);</div><div class="line">                        ++fail_count;</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (fail_count &gt; 0)</div><div class="line">            {</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; angl=&quot;</span> &lt;&lt; angle;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; ctoi=&quot;</span> &lt;&lt; 0 + contact.<a name="a172"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#aa8edfa65f97d2c80e868bac50695fed7">GetToiCount</a>();</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; solv=&quot;</span> &lt;&lt; 0 + solved;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; targ=(&quot;</span> &lt;&lt; distance * <a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; distance * <a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; maxv=&quot;</span> &lt;&lt; max_velocity;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; rang=(&quot;</span> &lt;&lt; min_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; min_y &lt;&lt; <span class="stringliteral">&quot;)-(&quot;</span> &lt;&lt; max_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; max_y &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; bpos=(&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line">                <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(impulse.GetCount()){0}; i &lt; impulse.GetCount(); ++i)</div><div class="line">                {</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; i#&quot;</span> &lt;&lt; (0 + i) &lt;&lt; <span class="stringliteral">&quot;={n&quot;</span> &lt;&lt; impulse.GetEntryNormal(i) &lt;&lt; <span class="stringliteral">&quot;,t&quot;</span> &lt;&lt; impulse.GetEntryTanget(i) &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div><div class="line">                }</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line"></div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; bodyA=(&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_a-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                <span class="keywordflow">if</span> (body_a == ball_body) std::cout &lt;&lt; <span class="stringliteral">&quot; ball&quot;</span>;</div><div class="line">                <span class="keywordflow">if</span> (!body_a-&gt;IsSpeedable()) std::cout &lt;&lt; <span class="stringliteral">&quot; wall&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; body_a;</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; bodyB=(&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_b-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                <span class="keywordflow">if</span> (body_b == ball_body) std::cout &lt;&lt; <span class="stringliteral">&quot; ball&quot;</span>;</div><div class="line">                <span class="keywordflow">if</span> (!body_b-&gt;IsSpeedable()) std::cout &lt;&lt; <span class="stringliteral">&quot; wall&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; body_b;</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line"></div><div class="line">                <span class="comment">//GTEST_FATAL_FAILURE_(&quot;&quot;);                </span></div><div class="line">            }</div><div class="line">        },</div><div class="line">        [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact) {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fA = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#acf266ef338a99dc9f63837c375706fe4">GetFixtureA</a>();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> fB = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a461a1dea95676477646a0058a5afb0d3">GetFixtureB</a>();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_a = fA-&gt;<a class="code" href="classplayrho_1_1d2_1_1Fixture.html#a06b4d3e9a3520768bc336da56083f566">GetBody</a>();</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> body_b = fB-&gt;GetBody();</div><div class="line"></div><div class="line">            <span class="keyword">auto</span> escaped = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; body: {body_a, body_b})</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (!body-&gt;IsSpeedable())</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">continue</span>;</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()) &gt;= right_edge_x * Meter)</div><div class="line">                {</div><div class="line">                    escaped = <span class="keyword">true</span>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()) &gt;= top_edge_y * Meter)</div><div class="line">                {</div><div class="line">                    escaped = <span class="keyword">true</span>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body-&gt;GetLocation()) &lt;= left_edge_x * Meter)</div><div class="line">                {</div><div class="line">                    escaped = <span class="keyword">true</span>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body-&gt;GetLocation()) &lt;= btm_edge_y * Meter)</div><div class="line">                {</div><div class="line">                    escaped = <span class="keyword">true</span>;                    </div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (escaped &amp;&amp; !contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a0bf45a339742f6db83b9e6ca4e54fdd1">IsTouching</a>())</div><div class="line">            {</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Escaped at EndContact[&quot;</span> &lt;&lt; &amp;contact &lt;&lt; <span class="stringliteral">&quot;]:&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; toiSteps=&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(contact.GetToiCount());</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; toiValid=&quot;</span> &lt;&lt; contact.<a name="a173"></a><a class="code" href="classplayrho_1_1d2_1_1Contact.html#a4ebfcc84851d42c9828e244fba58de8f">HasValidToi</a>();</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; a[&quot;</span> &lt;&lt; body_a &lt;&lt; <span class="stringliteral">&quot;]@(&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_a-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_a-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; b[&quot;</span> &lt;&lt; body_b &lt;&lt; <span class="stringliteral">&quot;]@(&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(body_b-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(body_b-&gt;GetLocation()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line">                <span class="comment">//exit(1);</span></div><div class="line">            }</div><div class="line">        },</div><div class="line">    };</div><div class="line">    ASSERT_EQ(listener.begin_contacts, <span class="keywordtype">unsigned</span>{0});</div><div class="line"></div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line">    </div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> outer = <span class="keywordtype">unsigned</span>{0}; outer &lt; 2000; ++outer)</div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> last_pos = ball_body-&gt;GetLocation();</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> loops = <span class="keywordtype">unsigned</span>{0};; ++loops)</div><div class="line">        {</div><div class="line">            target_joint-&gt;SetTarget(Length2{distance * <a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle) * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, distance * <a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle) * Meter});</div><div class="line">            angle += anglular_speed;</div><div class="line">            distance += distance_speed;</div><div class="line"></div><div class="line">            <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, 1_s * time_inc, 8, 3);</div><div class="line">            </div><div class="line">            ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), right_edge_x * Meter);</div><div class="line">            ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()), top_edge_y * Meter);</div><div class="line">            ASSERT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()), left_edge_x * Meter);</div><div class="line">            ASSERT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()), btm_edge_y * Meter);</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(numBodies){0}; i &lt; numBodies; ++i)</div><div class="line">            {</div><div class="line">                ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), right_edge_x * Meter);</div><div class="line">                ASSERT_LT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), top_edge_y * Meter);</div><div class="line">                ASSERT_GT(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), left_edge_x * Meter);</div><div class="line">                ASSERT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>()), btm_edge_y * Meter);</div><div class="line">            }</div><div class="line"></div><div class="line">            max_x = std::max(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) / Meter}, max_x);</div><div class="line">            min_x = std::min(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) / Meter}, min_x);</div><div class="line"></div><div class="line">            max_y = std::max(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()) / Meter}, max_y);</div><div class="line">            min_y = std::min(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()) / Meter}, min_y);</div><div class="line"></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> linVel = ball_body-&gt;GetVelocity().linear;</div><div class="line">            max_velocity = std::max(<a class="code" href="group__Math.html#ga85c114f129eeee63e60ec7d4703bbd65">GetMagnitude</a>(<a class="code" href="namespaceplayrho_1_1d2.html#a0846d15948227e392cacde27c1ac53f4">GetVec2</a>(linVel)), max_velocity);</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (loops &gt; 50)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(target_joint-&gt;GetTarget()) &lt; 0_m)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) &gt;= <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(last_pos))</div><div class="line">                        <span class="keywordflow">break</span>;                    </div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(ball_body-&gt;GetLocation()) &lt;= <a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(last_pos))</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(target_joint-&gt;GetTarget()) &lt; 0_m)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()) &gt;= <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(last_pos))</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(ball_body-&gt;GetLocation()) &lt;= <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(last_pos))</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                }</div><div class="line">            }</div><div class="line">            last_pos = ball_body-&gt;GetLocation();</div><div class="line">        }</div><div class="line">        anglular_speed *= anglular_accel;</div><div class="line">        distance_speed *= distance_accel;</div><div class="line"></div><div class="line">        ASSERT_NE(ball_body-&gt;GetLocation(), (Length2{}));</div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">        <span class="keywordflow">if</span> (outer &gt; 100)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(numBodies){0}; i &lt; numBodies; ++i)</div><div class="line">            {</div><div class="line">                <span class="comment">// a sanity check to ensure the other bodies are getting moved</span></div><div class="line">                EXPECT_NE(last_opos[i], bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a8a6f694cab71d0db91049dc0908de63f">GetLocation</a>());</div><div class="line">                last_opos[i] = bodies[i]-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#a63db5146e976e495518b850c37be060d">GetLocation</a>();</div><div class="line">            }</div><div class="line">        }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    }</div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;angle=&quot;</span> &lt;&lt; angle;</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; target=(&quot;</span> &lt;&lt; distance * <a class="code" href="group__FixedMath.html#gaf6191f040980675d9a5c71bd53c79060">cos</a>(angle) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; distance * <a class="code" href="group__FixedMath.html#ga0daabd6eacf8702561639d394e3efe6e">sin</a>(angle) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; maxvel=&quot;</span> &lt;&lt; max_velocity;</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot; range=(&quot;</span> &lt;&lt; min_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; min_y &lt;&lt; <span class="stringliteral">&quot;)-(&quot;</span> &lt;&lt; max_x &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; max_y &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line">    std::cout &lt;&lt; std::endl;</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> target0 = target_joint-&gt;GetTarget();</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> shift = Length2{2_m, 2_m};</div><div class="line">    world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a810c702555c946c686e4062c7966008c">ShiftOrigin</a>(shift);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> target1 = target_joint-&gt;GetTarget();</div><div class="line">    EXPECT_EQ(target0 - shift, target1);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> smaller_still_conserves_momentum(<span class="keywordtype">bool</span> bullet, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a> multiplier, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a> time_inc)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> radius = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1);</div><div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span> start_distance = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(10);</div><div class="line">    </div><div class="line">    <span class="keyword">auto</span> scale = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(1);</div><div class="line">    <span class="keywordflow">for</span> (;;)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> gravity = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{};</div><div class="line">        <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{<a class="code" href="structplayrho_1_1d2_1_1WorldConf.html">WorldConf</a>{}.UseGravity(gravity)};</div><div class="line">        ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(world.GetGravity()), 0);</div><div class="line">        ASSERT_EQ(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(world.GetGravity()), 0);</div><div class="line"></div><div class="line">        <span class="keyword">auto</span> maxNormalImpulse = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">        <span class="keyword">auto</span> maxTangentImpulse = <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0);</div><div class="line">        <span class="keyword">auto</span> maxPoints = 0u;</div><div class="line">        <span class="keyword">auto</span> numSteps = 0u;</div><div class="line">        <span class="keyword">auto</span> failed = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">auto</span> preB1 = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{};</div><div class="line">        <span class="keyword">auto</span> preB2 = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{};</div><div class="line">        </div><div class="line">        MyContactListener listener{</div><div class="line">            [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; contact, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1Manifold.html">Manifold</a>&amp;)</div><div class="line">            {</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> fA = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#acf266ef338a99dc9f63837c375706fe4">GetFixtureA</a>();</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> fB = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#a461a1dea95676477646a0058a5afb0d3">GetFixtureB</a>();</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> bA = fA-&gt;<a class="code" href="classplayrho_1_1d2_1_1Fixture.html#a06b4d3e9a3520768bc336da56083f566">GetBody</a>();</div><div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> bB = fB-&gt;GetBody();</div><div class="line">                preB1 = bA-&gt;GetLocation();</div><div class="line">                preB2 = bB-&gt;GetLocation();</div><div class="line">            },</div><div class="line">            [&amp;](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp; <span class="comment">/* contact */</span>, <span class="keyword">const</span> <a class="code" href="classplayrho_1_1d2_1_1ContactImpulsesList.html">ContactImpulsesList</a>&amp; impulse, <a class="code" href="classplayrho_1_1d2_1_1ContactListener.html#a090038a41a46c74f57cb289c0cee130e">ContactListener::iteration_type</a> <span class="comment">/* solved */</span>)</div><div class="line">            {</div><div class="line">                {</div><div class="line">                    <span class="keyword">const</span> <span class="keyword">auto</span> count = impulse.GetCount();</div><div class="line">                    maxPoints = std::max(maxPoints, decltype(maxPoints){count});</div><div class="line">                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(count){0}; i &lt; count; ++i)</div><div class="line">                    {</div><div class="line">                        maxNormalImpulse = std::max(maxNormalImpulse, impulse.GetEntryNormal(i));</div><div class="line">                        maxTangentImpulse = std::max(maxTangentImpulse, impulse.GetEntryTanget(i));</div><div class="line">                    }</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (maxNormalImpulse == 0 &amp;&amp; maxTangentImpulse == 0)</div><div class="line">                {</div><div class="line">                    failed = <span class="keyword">true</span>;</div><div class="line"><span class="preprocessor">#if 0</span></div><div class="line">                    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; manifold = contact.<a class="code" href="classplayrho_1_1d2_1_1Contact.html#af1e31fc73fe150e3b5f7bb4d3055d076">GetManifold</a>();</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; solved=&quot;</span> &lt;&lt; unsigned(solved);</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; numstp=&quot;</span> &lt;&lt; numSteps;</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; type=&quot;</span> &lt;&lt; unsigned(manifold.GetType());</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; lp.x=&quot;</span> &lt;&lt; manifold.GetLocalPoint().x;</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; lp.y=&quot;</span> &lt;&lt; manifold.GetLocalPoint().y;</div><div class="line">                    <span class="keyword">const</span> <span class="keyword">auto</span> count = manifold.GetPointCount();</div><div class="line">                    std::cout &lt;&lt; <span class="stringliteral">&quot; points=&quot;</span> &lt;&lt; unsigned(count);</div><div class="line">                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(count){0}; i &lt; count; ++i)</div><div class="line">                    {</div><div class="line">                        std::cout &lt;&lt; <span class="stringliteral">&quot; ni[&quot;</span> &lt;&lt; unsigned(i) &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; manifold.GetPoint(i).normalImpulse;</div><div class="line">                        std::cout &lt;&lt; <span class="stringliteral">&quot; ti[&quot;</span> &lt;&lt; unsigned(i) &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; manifold.GetPoint(i).tangentImpulse;</div><div class="line">                        std::cout &lt;&lt; <span class="stringliteral">&quot; lp[&quot;</span> &lt;&lt; unsigned(i) &lt;&lt; <span class="stringliteral">&quot;].x=&quot;</span> &lt;&lt; manifold.GetPoint(i).localPoint.x;</div><div class="line">                        std::cout &lt;&lt; <span class="stringliteral">&quot; lp[&quot;</span> &lt;&lt; unsigned(i) &lt;&lt; <span class="stringliteral">&quot;].y=&quot;</span> &lt;&lt; manifold.GetPoint(i).localPoint.y;</div><div class="line">                    }</div><div class="line">                    std::cout &lt;&lt; std::endl;</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                }</div><div class="line">            },</div><div class="line">            [=](<a class="code" href="classplayrho_1_1d2_1_1Contact.html">Contact</a>&amp;) {</div><div class="line">            }</div><div class="line">        };</div><div class="line">        world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a1d1fe0d0841ecd8b7576d6027464efa2">SetContactListener</a>(&amp;listener);</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> shape = <a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html">DiskShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1DiskShapeConf.html#a9cffdde99a7ec3fe7ad3ab2b634b741b">UseRadius</a>(scale * radius * Meter);</div><div class="line">        ASSERT_EQ(shape-&gt;GetRadius(), scale * radius);</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> fixture_def = <a class="code" href="structplayrho_1_1d2_1_1FixtureConf.html">FixtureConf</a>{}.UseDensity(1);</div><div class="line">        fixture_def.friction = 0;</div><div class="line">        fixture_def.restitution = 1;</div><div class="line">        </div><div class="line">        <span class="keyword">auto</span> body_def = <a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{};</div><div class="line">        body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a3f1a14b4e932c2e1fa3d78d8b069ec23">type</a> = BodyType::Dynamic;</div><div class="line">        body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a635dab49119a08c2ddbe1c082c502e29">bullet</a> = bullet;</div><div class="line">        </div><div class="line">        body_def.position = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{+(scale * start_distance), 0};</div><div class="line">        body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a> = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{-start_distance, 0};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> body_1 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_EQ(body_1-&gt;GetLocation().x, body_def.position.x);</div><div class="line">        ASSERT_EQ(body_1-&gt;GetLocation().y, body_def.position.y);</div><div class="line">        ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_1).x, body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.x);</div><div class="line">        ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_1).y, body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.y);</div><div class="line">        body_1-&gt;CreateFixture(shape, fixture_def);</div><div class="line">        </div><div class="line">        body_def.position = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{-(scale * start_distance), 0};</div><div class="line">        body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a> = <a class="code" href="structplayrho_1_1Vector.html">Vec2</a>{+start_distance, 0};</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> body_2 = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(body_def);</div><div class="line">        ASSERT_EQ(body_2-&gt;GetLocation().x, body_def.position.x);</div><div class="line">        ASSERT_EQ(body_2-&gt;GetLocation().y, body_def.position.y);</div><div class="line">        ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_2).x, body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.x);</div><div class="line">        ASSERT_EQ(<a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_2).y, body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.y);</div><div class="line">        body_2-&gt;CreateFixture(shape, fixture_def);</div><div class="line">        </div><div class="line">        <span class="keywordflow">for</span> (;;)</div><div class="line">        {</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> relative_velocity = <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_1) - <a class="code" href="classplayrho_1_1d2_1_1Body.html#a3802163b90f631b001eaa0201be419c9">GetLinearVelocity</a>(*body_2);</div><div class="line">            <span class="keywordflow">if</span> (relative_velocity.x &gt;= 0)</div><div class="line">            {</div><div class="line">                EXPECT_NEAR(<span class="keywordtype">double</span>(relative_velocity.x), <span class="keywordtype">double</span>(<a name="a174"></a><a class="code" href="group__Math.html#ga8c5b7f3e28aa844cad21eb801d081cd3">Abs</a>(body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.x) * +2), 0.0001);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">if</span> (failed)</div><div class="line">            {</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; scale=&quot;</span> &lt;&lt; scale;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; dist0=&quot;</span> &lt;&lt; (scale * start_distance * 2);</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; bcont=&quot;</span> &lt;&lt; listener.begin_contacts;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; econt=&quot;</span> &lt;&lt; listener.end_contacts;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; pre-#=&quot;</span> &lt;&lt; listener.pre_solves;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; post#=&quot;</span> &lt;&lt; listener.post_solves;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; normi=&quot;</span> &lt;&lt; maxNormalImpulse;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; tangi=&quot;</span> &lt;&lt; maxTangentImpulse;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; n-pts=&quot;</span> &lt;&lt; maxPoints;</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; pre1.x=&quot;</span> &lt;&lt; preB1.x;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; pre2.x=&quot;</span> &lt;&lt; preB2.x;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; pos1.x=&quot;</span> &lt;&lt; body_1-&gt;GetLocation().x;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; pos2.x=&quot;</span> &lt;&lt; body_2-&gt;GetLocation().x;</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; preDel=&quot;</span> &lt;&lt; (preB1.x - preB2.x);</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; posDel=&quot;</span> &lt;&lt; (body_1-&gt;GetLocation().x - body_2-&gt;GetLocation().x);</div><div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot; travel=&quot;</span> &lt;&lt; (body_1-&gt;GetLocation().x - preB1.x);</div><div class="line">                std::cout &lt;&lt; std::endl;</div><div class="line">                ASSERT_FALSE(failed);</div><div class="line">            }</div><div class="line">            </div><div class="line">            EXPECT_TRUE(<a class="code" href="group__Math.html#ga035c5294391f9652e8966092b5caca58">AlmostEqual</a>(relative_velocity.x, <a class="code" href="group__Math.html#ga8c5b7f3e28aa844cad21eb801d081cd3">Abs</a>(body_def.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a505089bd57b75722c4b7c2e77738ee98">linearVelocity</a>.x) * -2));</div><div class="line">            <a class="code" href="classplayrho_1_1d2_1_1World.html#a035ee60a3274619546a2cee7b982b894">Step</a>(world, time_inc);</div><div class="line">            ++numSteps;</div><div class="line">        }</div><div class="line">        </div><div class="line">        scale *= multiplier;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SmallerStillConservesMomemtum)</div><div class="line">{</div><div class="line">    <span class="comment">// smaller_still_conserves_momentum(false, Real(0.999), Real(0.01));</span></div><div class="line">    <span class="comment">// fails around scale=0.0899796 dist0=1.79959</span></div><div class="line">    <span class="comment">// goin to smaller time increment fails nearly same point.</span></div><div class="line">    smaller_still_conserves_momentum(<span class="keyword">false</span>, <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.999), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.01));</div><div class="line">}</div><div class="line"></div><div class="line">TEST(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, SmallerBulletStillConservesMomemtum)</div><div class="line">{</div><div class="line">    <span class="comment">// smaller_still_conserves_momentum(true, Real(0.999), Real(0.01))</span></div><div class="line">    <span class="comment">// fails around scale=4.99832e-05 dist0=0.000999664</span></div><div class="line">    <span class="comment">// goin to smaller time increment fails nearly same point.</span></div><div class="line"><span class="comment">// smaller_still_conserves_momentum(true, Real(0.999), Real(0.01));</span></div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>VerticalStackTest: <span class="keyword">public</span> ::testing::TestWithParam&lt;Real&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetUp()</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> hw_ground = 40.0_m;</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> ground = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>();</div><div class="line">        ground-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(<a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html">EdgeShapeConf</a>{}.<a class="code" href="classplayrho_1_1d2_1_1EdgeShapeConf.html#a3c285199c324b6de0de6ed0ee4c675f9">Set</a>(Length2{-hw_ground, 0_m}, Length2{hw_ground, 0_m})});</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> numboxes = boxes.size();</div><div class="line">        original_x = GetParam();</div><div class="line">        </div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> boxShape = <a class="code" href="classplayrho_1_1d2_1_1Shape.html">Shape</a>{<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html">PolygonShapeConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a5a36e113cd3a962dae60b3e3ab855c70">UseDensity</a>(1_kgpm2).<a name="a175"></a><a class="code" href="structplayrho_1_1d2_1_1ShapeBuilder.html#a973f6781e63cb44363bf2a720f811855">UseFriction</a>(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0.3f)).<a class="code" href="classplayrho_1_1d2_1_1PolygonShapeConf.html#aaccd7ca4c4e1fa493fe4dca42d200d33">SetAsBox</a>(hdim, hdim)};</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = decltype(numboxes){0}; i &lt; numboxes; ++i)</div><div class="line">        {</div><div class="line">            <span class="comment">// (hdim + 0.05f) + (hdim * 2 + 0.1f) * i</span></div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> location = Length2{original_x * <a class="code" href="group__PhysicalUnits.html#ga2f0ff7b721060132468649c9afb07c37">Meter</a>, (i + <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{1}) * hdim * <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>{4}};</div><div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> box = world.<a class="code" href="classplayrho_1_1d2_1_1World.html#a66716e8c9020509c9891d9223a58be93">CreateBody</a>(<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html">BodyConf</a>{}.<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#ac2af87244b6172527a527793ff3614fc">UseType</a>(BodyType::Dynamic).<a class="code" href="structplayrho_1_1d2_1_1BodyConf.html#a452134100531c3c1274fc8ce6df4becd">UseLocation</a>(location));</div><div class="line">            box-&gt;<a class="code" href="classplayrho_1_1d2_1_1Body.html#ae09b2950d8313278578e73dd39c1bd1a">CreateFixture</a>(boxShape);</div><div class="line">            boxes[i] = box;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <a class="code" href="namespaceplayrho_1_1d2.html#ad85bb4dfbf060d7d28668e4bc2d73a10">SetAccelerations</a>(world, <a class="code" href="structplayrho_1_1d2_1_1Acceleration.html">Acceleration</a>{<a class="code" href="structplayrho_1_1Vector.html">LinearAcceleration2</a>{</div><div class="line">            <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a>, -<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(10) * <a class="code" href="group__PhysicalUnits.html#ga6d200ec14214ce97214a95ec2f83c626">MeterPerSquareSecond</a></div><div class="line">        }, 0 * <a class="code" href="group__PhysicalUnits.html#gaea803bc1b5ab2d6a9959f4d4edc06a8b">RadianPerSquareSecond</a>});</div><div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> stepConf = <a class="code" href="classplayrho_1_1StepConf.html">StepConf</a>{}.<a class="code" href="classplayrho_1_1StepConf.html#a2144d7186ffeb6eb540716f99f9bfe7a">SetTime</a>(1_s / 60);</div><div class="line">        <span class="keywordflow">while</span> (loopsTillSleeping &lt; maxLoops)</div><div class="line">        {</div><div class="line">            world.<a class="code" href="classplayrho_1_1d2_1_1World.html#af65a576b04537b18bcddf5636b0d3386">Step</a>(stepConf);</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="namespaceplayrho_1_1d2.html#a0812de1607b6656927bc2ad724f1d7c3">GetAwakeCount</a>(world) == 0)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">            ++loopsTillSleeping;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line">    <a class="code" href="classplayrho_1_1d2_1_1World.html">World</a> world{};</div><div class="line">    std::size_t loopsTillSleeping = 0;</div><div class="line">    <span class="keyword">const</span> std::size_t maxLoops = 10000;</div><div class="line">    std::vector&lt;Body*&gt; boxes{10};</div><div class="line">    <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a> original_x = 0;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="group__PhysicalQuantities.html#ga7361ef2e10e7853a05b64aa433651014">Length</a> hdim = 0.1_m;</div><div class="line">};</div><div class="line"></div><div class="line">TEST_P(VerticalStackTest, EndsBeforeMaxLoops)</div><div class="line">{</div><div class="line">    EXPECT_LT(loopsTillSleeping, maxLoops);</div><div class="line">}</div><div class="line"></div><div class="line">TEST_P(VerticalStackTest, BoxesAtOriginalX)</div><div class="line">{</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; box: boxes)</div><div class="line">    {</div><div class="line">        EXPECT_EQ(<a class="code" href="namespaceplayrho.html#ac40645d0127c8fd699610de821aebb57">GetX</a>(box-&gt;GetLocation()), original_x * Meter);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST_P(VerticalStackTest, EachBoxAboveLast)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> lasty = 0_m;</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; box: boxes)</div><div class="line">    {</div><div class="line">        EXPECT_GT(<a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(box-&gt;GetLocation()), lasty + hdim);</div><div class="line">        lasty = <a class="code" href="namespaceplayrho.html#ac8e87b921726f7c140ea35db1913ac6c">GetY</a>(box-&gt;GetLocation());</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">TEST_P(VerticalStackTest, EachBodyLevel)</div><div class="line">{</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; box: boxes)</div><div class="line">    {</div><div class="line">        EXPECT_EQ(box-&gt;GetAngle(), 0_deg);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> std::string test_suffix_generator(::testing::TestParamInfo&lt;Real&gt; param_info)</div><div class="line">{</div><div class="line">    std::stringstream strbuf;</div><div class="line">    strbuf &lt;&lt; param_info.index;</div><div class="line">    <span class="keywordflow">return</span> strbuf.str();</div><div class="line">}</div><div class="line"></div><div class="line">extern ::testing::internal::ParamGenerator&lt;VerticalStackTest::ParamType&gt; gtest_WorldVerticalStackTest_EvalGenerator_();</div><div class="line">extern ::std::string gtest_WorldVerticalStackTest_EvalGenerateName_(const ::testing::TestParamInfo&lt;VerticalStackTest::ParamType&gt;&amp; info);</div><div class="line"></div><div class="line">INSTANTIATE_TEST_CASE_P(<a class="code" href="classplayrho_1_1d2_1_1World.html">World</a>, VerticalStackTest, ::testing::Values(<a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(0), <a class="code" href="namespaceplayrho.html#a1fc125070a08100d083a1360f7167f87">Real</a>(5)), test_suffix_generator);</div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Feb 7 2018 17:35:38 for PlayRho by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
