# For information on these settings, see:
#    https://www.appveyor.com/docs/build-configuration/
#    https://www.appveyor.com/docs/appveyor-yml/
#
# Notes:
#   - Minimal appveyor.yml file is an empty file. All sections are optional.
#   - Indent each level of configuration with 2 spaces. Do not use tabs!
#   - All section names are case-sensitive.
#   - Section names should be unique on each level.

# The following is supported by default. See:
#   https://www.appveyor.com/docs/how-to/filtering-commits/
#
#skip_commits:
#  message: /\[appveyor skip\]/|/\[skip appveyor\]/

image: Visual Studio 2017

build:
  project: Build/vs2017/PlayRho.sln
  verbosity: normal

platform:
  - Win32
  - x64

configuration:
  - Debug
  - Release

before_test:
  - if "%platform%"=="Win32" (set "PLAYRHO_EXE=x32")
  - if "%platform%"=="x64" (set "PLAYRHO_EXE=x64")
  - echo "PLAYRHO_EXE=\"$(PLAYRHO_EXE)\""
  - echo "PLAYRHO_EXE=\"$env:PLAYRHO_EXE\""
  - echo "platform=\"{platform}\""
  - ps: |
  If ($env:PLATFORM -Match "Win32") {
    $env:PLAYRHO_EXE="x32"
  }
  If ($env:PLATFORM -Match "x64") {
    $env:PLAYRHO_EXE="x64"
  }

test_script:
  - ps: Start-Process -FilePath "\projects\playrho\Build\vs2017\bin\$env:PLAYRHO_EXE\$env:CONFIGURATION\HelloWorld.exe" -RedirectStandardOutput "Hello.txt"
